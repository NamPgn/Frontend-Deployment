import{r as s,j as t,S as z,s as b,i as K,g as O,D as R,b as y,F as f,c as p,p as n,E as B,m as Y,o as c,G,H,I as J,J as Q,Q as u,K as X,l as w}from"./index.56e1f4bc.js";import{M}from"./index.f423a372.js";import{T as P}from"./index.28ee168c.js";import{D as $}from"./DeleteOutlined.b83a8d9a.js";const q=s.exports.memo(({defaultValue:o,placeholder:a,style:d,options:r,...h})=>t(z,{placeholder:a,defaultValue:o,style:d,options:r,allowClear:!0,...h})),U=b.div``,W=b.input``,Z=({product:o,length:a,isLoading:d})=>{const{category:r,seri:h}=s.exports.useContext(K),[S,E]=s.exports.useState(""),[m,A]=s.exports.useState(""),[T,V]=s.exports.useState(!1),[x,N]=s.exports.useState([]),[g,_]=s.exports.useState(3),C=O();s.exports.useEffect(()=>{C(R(g)),document.title="Admin Page"},[T,g]);let i=o;S.length&&(i=o.filter(e=>e.name.toLowerCase().includes(S.toLowerCase()))),m&&(i=o.filter(e=>m==e.category),m=="Select"&&o.map(e=>i.push(e)));const F=async()=>{(await Q(x)).success?(V(!0),u.success("Delete products successfully")):u.error("Error deleting products")},L=async e=>{(await C(X(e))).payload.success?u.success("Delete product successfully"):u.error("Error deleting product")},k=e=>{A(e)},I={selectedRowKeys:x,onChange:e=>{N(e)}},j=i&&i.map((e,D)=>({key:e._id,name:e.name,trailer:e.trailer?"true":"false",category:r&&r.data.map(l=>{if(l._id===e.category)return l.name}),sidebar:h&&h.map((l,ee)=>l._id===e.typeId&&l.name),Seri:e.seri,copyright:e.copyright,isActive:e.server2||e.dailymotion?t(P,{color:"success",children:"Video active"}):t(P,{color:"error",children:"No video"}),options:e.options,country:e.country?e.country:"null",year:e.year?e.year:"null",action:y(f,{children:[t(p,{to:`/dashboard/product/edit/${e._id}`,children:t(n,{danger:!0,shape:"circle",children:t(B,{})})}),t(M,{title:"Delete the product",onConfirm:()=>L(e._id),okText:"Yes",cancelText:"No",children:t(n,{shape:"circle",className:"ml-2",children:t($,{})})})]})}));return y(f,{children:[y(Y,{gutter:[10,10],align:"middle",style:{marginBottom:"10px"},children:[t(c,{children:t(M,{title:"Delete the products",onConfirm:F,okText:"Yes",cancelText:"No",children:t(n,{children:"X\xF3a"})})}),t(c,{children:t(p,{to:"/dashboard/product/add",children:t(n,{children:"Add Product"})})}),t(c,{children:t(p,{to:"/dashboard/product/creacting",children:t(n,{children:"Add Multiple"})})}),t(c,{children:t(p,{to:"/dashboard/product/add",children:t(n,{children:"Export PDF"})})}),t(c,{children:t(p,{to:"/dashboard/product/add",children:t(n,{danger:!0,shape:"round",children:"Export Excel"})})}),t(c,{children:t(q,{placeholder:"Select",onChange:k,defaultValue:"Select",style:{width:300},options:r&&(r==null?void 0:r.data.map((e,D)=>({label:e.name,value:e._id}))),children:void 0})}),t(c,{children:t(U,{className:"form-outline",children:t(W,{type:"search",placeholder:"search...",className:"form-control p-2 rounded",onChange:e=>{E(e.target.value)}})})})]}),t(G,{spinning:d,delay:void 0,children:t(H,{rowSelection:I,columns:J,dataSource:j,scroll:{x:1500,y:1e3},pagination:{defaultPageSize:40,showSizeChanger:!0,pageSizeOptions:["40","80","120"],current:g,onChange:e=>{_(e)},total:a}})})]})},ne=()=>{const{product:o,length:a}=w(r=>r.product.value),d=w(r=>r.product.isLoading);return t(f,{children:t(Z,{product:o,isLoading:d,length:a})})};export{ne as default};
