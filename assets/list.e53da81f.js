import{r as s,j as e,F as T,_ as w,S as Z,i as q,g as ee,G as te,T as M,p as a,d as f,H as p,m as re,o as d,e as l,I as L,J as ae,K as se,O as ne,Q as oe,U as ce,V as C,W as ie,X as k,E as D,Y as le,Z as de,v as I,w as P,$ as pe,l as E}from"./index.43592094.js";import{M as N}from"./index.21025ac5.js";import{D as z}from"./DeleteOutlined.825e1d34.js";var ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"};const he=ue;var R=function(o,c){return e(T,{...w(w({},o),{},{ref:c,icon:he})})};R.displayName="CloseCircleOutlined";const ye=s.exports.forwardRef(R);var me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};const ge=me;var _=function(o,c){return e(T,{...w(w({},o),{},{ref:c,icon:ge})})};_.displayName="SendOutlined";const fe=s.exports.forwardRef(_),V=s.exports.memo(({defaultValue:n,placeholder:o,style:c,options:i,...u})=>e(Z,{placeholder:o,defaultValue:n,style:c,options:i,allowClear:!0,...u})),xe=s.exports.memo(({product:n,length:o,isLoading:c})=>{const{category:i,seri:u,user:y}=s.exports.useContext(q),[h,Se]=s.exports.useState(""),[b,$]=s.exports.useState(""),[x,v]=s.exports.useState(!1),[O,j]=s.exports.useState([]),[A,B]=s.exports.useState(3),S=ee();let m=n;s.exports.useEffect(()=>{S(te(A))},[x,A]);const F=t=>{S(ne(t))},Y=t=>{S(oe(t))};h.length&&(m=n.filter(t=>t.name.toLowerCase().includes(h.toLowerCase()))),b&&(m=n.filter(t=>t.isApproved==!1),b=="Select"&&n.map(t=>m.push(t)));const K=async()=>{(await ce(O)).data.success==!0?(v(!x),C.success("Delete products successfully")):C.error("Error deleting products")},H=async t=>{(await S(le(t))).payload.success?C.success("Delete product successfully"):C.error("Error deleting product")},Q=t=>{$(t)},G={selectedRowKeys:O,onChange:t=>{j(t)}},J=async t=>{const r=await de(t);r.data.success==!0?(I(r.data.message),v(!x)):P("L\u1ED7i r\u1ED3i!")},U=async t=>{const r=await pe(t);r.data.success==!0?(I(r.data.message),v(!x)):P("L\u1ED7i r\u1ED3i!")},W=[{title:"Name",dataIndex:"name",key:"name"},{title:"Category",key:"category",dataIndex:"category"},{title:"Sidebar",key:"sidebar",dataIndex:"sidebar",width:100},{title:"Seri",key:"seri",dataIndex:"seri",width:100},{title:"Copyright",key:"copyright",dataIndex:"copyright",width:100},{title:"Active",dataIndex:"isActive",key:"isActive",width:90},{title:"Trailer",dataIndex:"trailer",key:"trailer",width:100},{title:"Country",dataIndex:"country",key:"country",width:100},{title:"Year",dataIndex:"year",key:"year",width:100},{title:"Options",dataIndex:"options",key:"options"},{title:"Action",key:"action",dataIndex:"action",width:140,fixed:"right",render:(t,r)=>{switch(y==null?void 0:y.role){case 0:return e(p,{children:e(l,{to:"/",children:e(a,{type:"text",shape:"circle",children:e(k,{})})})});case 1:return f(p,{children:[e(l,{to:"/",children:e(a,{type:"text",shape:"circle",children:e(k,{})})}),e(l,{to:`/dashboard/product/edit/${r.key}`,children:e(a,{type:"text",danger:!0,shape:"circle",children:e(D,{})})})]});case 2:return f(p,{children:[(r==null?void 0:r.isApproved)==!0?f(p,{children:[e(a,{className:"flex items-center mb-2",icon:e(ie,{}),ghost:!0,type:"text",style:{color:"#000"},disabled:r.isApproved==!0,children:"Approved"}),e(a,{onClick:()=>U(r.key),icon:e(ye,{}),className:"flex items-center w-full justify-center mb-2",danger:!0,children:"Approval"})]}):e(p,{children:e(a,{onClick:()=>J(r.key),icon:e(fe,{}),className:"flex items-center w-full justify-center",type:"primary",children:"Approve"})}),e(l,{to:"/d/"+r.key+"?c"+r.idCategory,children:e(a,{type:"text",shape:"circle",children:e(k,{})})}),e(l,{to:`/dashboard/product/edit/${r.key}`,children:e(a,{type:"text",danger:!0,shape:"circle",children:e(D,{})})}),e(N,{title:"Delete the product",onConfirm:()=>H(r.key),okText:"Yes",cancelText:"No",children:e(a,{type:"text",shape:"circle",className:"ml-2",children:e(z,{})})})]})}}}],X=m&&m.map((t,r)=>({key:t._id,name:t.name,trailer:t.trailer?"true":"false",category:i&&i.data.map(g=>{if(g._id===t.category)return g.name}),sidebar:u&&u.map((g,we)=>g._id===t.typeId&&g.name),seri:t.seri,copyright:t.copyright,isActive:t.server2||t.dailymotion?e(M,{color:"success",children:"Video active"}):e(M,{color:"error",children:"No video"}),options:t.options,country:t.country?t.country:"null",year:t.year?t.year:"null",isApproved:t.isApproved,idCategory:t.category,option:[e(a,{children:"Add Option"})]}));return f(p,{children:[f(re,{gutter:[10,10],align:"middle",style:{marginBottom:"10px"},children:[e(d,{children:e(N,{title:"Delete the products",onConfirm:K,okText:"Yes",cancelText:"No",children:e(a,{icon:e(z,{}),className:"flex items-center",children:"Delete"})})}),e(d,{children:e(l,{to:"/dashboard/product/add",children:e(a,{icon:e(L,{}),className:"flex items-center",children:"Add Product"})})}),e(d,{children:e(l,{icon:e(L,{}),to:"/dashboard/product/creacting",children:e(a,{children:"Add Multiple"})})}),e(d,{children:e(l,{to:"/dashboard/product/add",children:e(a,{children:"Export PDF"})})}),e(d,{children:e(l,{to:"/dashboard/product/add",children:e(a,{danger:!0,shape:"round",children:"Export Excel"})})}),e(d,{children:e(V,{placeholder:"Select",onChange:F,defaultValue:"",style:{width:300},options:i&&(i==null?void 0:i.data.map((t,r)=>({label:t.name,value:t._id})))})}),e(d,{children:e(V,{placeholder:"Select",onChange:Q,defaultValue:"Select",style:{width:300},options:[{value:!0,label:"Approve"},{value:!1,label:"Approved"}],children:void 0})}),e(d,{children:e("div",{className:"form-outline",children:e("input",{type:"search",placeholder:"search...",className:"form-control p-2 rounded bg-[#fff]",onChange:t=>Y(t.target.value)})})})]}),e(ae,{spinning:c,delay:void 0,children:e(se,{rowSelection:G,expandable:{expandedRowRender:t=>e(p,{children:t.option})},columns:W,dataSource:X,scroll:{x:1500,y:1e3},pagination:{defaultPageSize:40,showSizeChanger:!0,pageSizeOptions:["40","80","120"],current:A,onChange:t=>{B(t)},total:o}})})]})}),be=()=>{const{product:n,length:o}=E(h=>h.product.value),c=E(h=>h.product.isLoading),i=s.exports.useMemo(()=>n,[n]),u=s.exports.useMemo(()=>o,[o]),y=s.exports.useMemo(()=>c,[c]);return e(p,{children:e(xe,{product:i,isLoading:y,length:u})})};export{be as default};
