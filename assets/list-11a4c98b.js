import{r,j as e,aS as H,ag as N,aT as C,aU as Q,aV as W,aW as g,aX as X,aY as Z,aZ as G,E as w,aR as M,al as J}from"./vendor-5f4444f9.js";import{g as v,n as ee,f as te,e as se,o as I,p as A,q as a,s as ae,t as n,v as E,c,w as re,x as ne,y as ce,z as ie,B as oe,k as S,l as k,C as de,D as le,E as pe}from"./index-e767e9f8.js";const D=r.memo(({defaultValue:i,placeholder:h,style:d,options:l,...x})=>e.jsx(H,{placeholder:h,defaultValue:i,style:d,options:l,allowClear:!0,...x})),he=r.memo(({product:i,length:h,isLoading:d})=>{const[l,x]=r.useState(10),o=v(t=>t.category.category),{seri:p}=r.useContext(ee)||[],{user:j}=r.useContext(te),[b,O]=r.useState(""),[y,f]=r.useState(!1),[P,V]=r.useState([]),u=se();let m=i;r.useEffect(()=>{u(I(l))},[y]);const F=t=>{u(ne(t))},L=t=>{u(ce(t))},R=t=>{x(t),u(I(t))};b&&(m=i.filter(t=>t.isApproved==!1),b=="Select"&&i.map(t=>m.push(t)));const T=async()=>{(await ie(P)).data.success==!0?(f(!y),g.success("Delete products successfully")):g.error("Error deleting products")},z=async t=>{(await u(de(t))).payload.success?g.success("Delete product successfully"):g.error("Error deleting product")},_=t=>{O(t)},B={selectedRowKeys:P,onChange:t=>{V(t)}},Y=async t=>{const s=await le(t);s.data.success==!0?(S(s.data.message),f(!y)):k("Lỗi rồi!")},K=async t=>{const s=await pe(t);s.data.success==!0?(S(s.data.message),f(!y)):k("Lỗi rồi!")},U=async()=>{const t=await oe();t.data.suscess==!0?S(t.data.message):k(t.data.message)},$=[{title:"Name",dataIndex:"name",key:"name",width:200},{title:"Category",key:"category",dataIndex:"category",width:200},{title:"View",key:"view",dataIndex:"view",width:100},{title:"Seri",key:"seri",dataIndex:"seri",width:100},{title:"Copyright",key:"copyright",dataIndex:"copyright",width:100},{title:"Active",dataIndex:"isActive",key:"isActive",width:90},{title:"Trailer",dataIndex:"trailer",key:"trailer",width:100},{title:"Country",dataIndex:"country",key:"country",width:100},{title:"Year",dataIndex:"year",key:"year",width:100},{title:"Options",dataIndex:"options",key:"options",width:100},{title:"Sidebar",key:"sidebar",dataIndex:"sidebar",width:100},{title:"Action",key:"action",dataIndex:"action",width:140,fixed:"right",render:(t,s)=>{switch(j==null?void 0:j.role){case 0:return e.jsx(e.Fragment,{children:e.jsx(c,{to:"/",children:e.jsx(a,{type:"text",shape:"circle",children:e.jsx(w,{})})})});case 1:return e.jsxs(e.Fragment,{children:[e.jsx(c,{to:"/",children:e.jsx(a,{type:"text",shape:"circle",children:e.jsx(w,{})})}),e.jsx(c,{to:`/dashboard/product/edit/${s.key}`,children:e.jsx(a,{type:"text",danger:!0,shape:"circle",children:e.jsx(M,{})})})]});case 2:return e.jsxs(e.Fragment,{children:[(s==null?void 0:s.isApproved)==!0?e.jsxs(e.Fragment,{children:[e.jsx(a,{className:"flex items-center mb-2",icon:e.jsx(X,{}),ghost:!0,type:"text",style:{color:"#000"},disabled:s.isApproved==!0,children:"Approved"}),e.jsx(a,{onClick:()=>K(s.key),icon:e.jsx(Z,{}),className:"flex items-center w-full justify-center mb-2",danger:!0,children:"Approval"})]}):e.jsx(e.Fragment,{children:e.jsx(a,{onClick:()=>Y(s.key),icon:e.jsx(G,{}),className:"flex items-center w-full justify-center",type:"primary",children:"Approve"})}),e.jsxs("div",{className:"flex",children:[e.jsx(c,{to:"/d/"+s.key+"?c="+s.idCategory,children:e.jsx(a,{type:"text",shape:"circle",children:e.jsx(w,{})})}),e.jsx(c,{to:`/dashboard/product/edit/${s.key}`,children:e.jsx(a,{type:"text",danger:!0,shape:"circle",children:e.jsx(M,{})})}),e.jsx(E,{title:"Delete the product",onConfirm:()=>z(s.key),okText:"Yes",cancelText:"No",children:e.jsx(a,{type:"text",shape:"circle",className:"ml-2",children:e.jsx(N,{})})}),e.jsx(a,{type:"text",shape:"circle",className:"ml-2",children:e.jsx(J,{type:"success"})})]})]})}}}],q=m&&m.map(t=>({key:t._id,name:t.name,trailer:t.trailer?"true":"false",category:o&&o.data.map(s=>{if(s._id===t.category)return s.name}),view:e.jsx(A,{color:"#2db7f5",children:t.view}),sidebar:p&&p.map((s,ue)=>s._id===t.typeId&&s.name),seri:t.seri,copyright:t.copyright,isActive:t.server2||t.dailyMotionServer?e.jsx(A,{color:"success",children:"Video active"}):e.jsx(A,{color:"error",children:"No video"}),options:t.options,country:t.country?t.country:"null",year:t.year?t.year:"null",isApproved:t.isApproved,idCategory:t.category,option:[e.jsx(a,{children:"Add Option"})]}));return e.jsxs(e.Fragment,{children:[e.jsxs(ae,{gutter:[10,10],align:"middle",style:{marginBottom:"10px"},children:[e.jsx(n,{children:e.jsx(E,{title:"Delete the products",onConfirm:T,okText:"Yes",cancelText:"No",children:e.jsx(a,{icon:e.jsx(N,{}),className:"flex items-center",children:"Delete"})})}),e.jsx(n,{children:e.jsx(c,{to:"/dashboard/product/add",children:e.jsx(a,{icon:e.jsx(C,{}),type:"primary",className:"flex items-center",children:"Add Product"})})}),e.jsx(n,{children:e.jsx(c,{icon:e.jsx(C,{}),to:"/dashboard/product/creacting",children:e.jsx(a,{className:"bg-green-400 ",children:"Add Multiple"})})}),e.jsx(n,{children:e.jsx(c,{to:"/dashboard/product/add",children:e.jsx(a,{className:"bg-yellow-400",children:"Export PDF"})})}),e.jsx(n,{children:e.jsx(c,{to:"/dashboard/product/add",children:e.jsx(a,{className:"bg-purple-500",shape:"round",children:"Export Excel"})})}),e.jsx(n,{children:e.jsx(D,{placeholder:"Category",onChange:F,style:{width:300},options:o&&(o==null?void 0:o.data.map((t,s)=>({label:t.name,value:t._id})))})}),e.jsx(n,{children:e.jsx(D,{placeholder:"Approval",onChange:_,style:{width:300},options:[{value:!0,label:"Approve"},{value:!1,label:"Approved"}],children:void 0})}),e.jsx(n,{children:e.jsx("div",{className:"form-outline",children:e.jsx("input",{type:"search",placeholder:"search...",className:"form-control p-2 rounded bg-[#fff] shadow-sm",onChange:t=>L(t.target.value)})})}),e.jsx(n,{children:e.jsxs(a,{onClick:()=>U(),icon:e.jsx(C,{}),danger:!0,className:"flex items-center",children:[e.jsx(Q,{}),"Clear Products Redis"]})})]}),e.jsx(W,{spinning:d,delay:void 0,children:e.jsx(re,{rowSelection:B,expandable:{expandedRowRender:t=>e.jsx(e.Fragment,{children:t.option})},columns:$,dataSource:q,scroll:{x:1500,y:1e3},pagination:{defaultPageSize:40,showSizeChanger:!0,pageSizeOptions:["40","80","120"],current:l,onChange:R,total:444}})})]})}),ge=()=>{const{product:i,length:h}=v(p=>p.product.value),d=v(p=>p.product.isLoading),l=r.useMemo(()=>i,[i]),x=r.useMemo(()=>h,[h]),o=r.useMemo(()=>d,[d]);return e.jsx(e.Fragment,{children:e.jsx(he,{product:l,isLoading:o,length:x})})};export{ge as default};
