import{r as i,ag as E,j as a,a$ as F,f as d,J as O,b3 as I,b4 as P,aX as p}from"./vendor.47cf65fa.js";import{e as j,g as W,a2 as z,n as $,a3 as q,c as g,p as b,q as r,J as n,w as B,a4 as H,a5 as J,a6 as U,k as G,l as L}from"./index.517fbead.js";import{p as Q}from"./type.c54a4577.js";import{M as R}from"./index.a5b058cd.js";import{M as X}from"./index.57f2f6cd.js";const se=()=>{const[f,u]=i.exports.useState(!1),v=()=>{u(!0)},S=()=>{u(!1)},k=()=>{u(!1)},m=j(),h=W(z),{seri:c,weeks:o}=i.exports.useContext($),{handleSubmit:w,control:l}=E(),[y,A]=i.exports.useState();i.exports.useEffect(()=>{m(q(1))},[1]);const x=c&&(c==null?void 0:c.map((e,s)=>({label:s+1+" - "+e.name,value:e._id,children:e.categorymain.map((t,_)=>({label:_+1+" - "+t.cates.name,value:t.cates._id}))}))),C=e=>{A(e)},M=async e=>{const s=new FormData;s.append("name",e.name),s.append("des",e.des),s.append("sumSeri",e.sumSeri),s.append("week",e.week),s.append("type",e.type),s.append("file",e.file),s.append("up",e.up),s.append("time",e.time),s.append("isActive",e.isActive),s.append("year",e.year),s.append("anotherName",e.anotherName),s.append("hour",e.hour),(await m(J(s))).payload.success==!0?p.success("Th\xE0nh c\xF4ng"):p.error("Th\u1EA5t b\u1EA1i")},N=async e=>{(await m(U(e))).payload?p.success("Delete Success"):p.error("Delete Failure")},D=async e=>{(await Q(y,{categoryId:e})).data.success?G("Add category success!"):L("Failure!")},T=o&&(o==null?void 0:o.map((e,s)=>({label:e.name,value:e._id}))),V=h.data&&h.data.map((e,s)=>({key:e._id,stt:s+1,name:a(g,{to:"/q/"+e._id,children:e.name}),image:a(F,{width:150,height:200,style:{objectFit:"cover"},src:e.linkImg}),createAt:e.createdAt,duration:e.time,isActive:e.isActive==0?a(b,{color:"warning",children:"isPending"}):a(b,{color:"success",children:"Done"}),year:e.year,set:e.up,week:o&&o.map(t=>t._id==e.week&&t.name),action:d("div",{className:"flex gap-1",children:[a(g,{to:`/dashboard/category/edit/${e._id}`,children:a(r,{style:{background:"#1677ff"},type:"primary",children:"Edit"})}),a(r,{danger:!0,className:"ml-2",onClick:()=>N(e._id),children:"Delete"}),a(r,{className:"ml-2",onClick:()=>D(e._id),children:"Push"})]})}));return d(O.Fragment,{children:[d("div",{className:"flex gap-1",children:[a(r,{type:"primary",onClick:v,children:"New"}),a(I,{style:{width:"100%"},value:y,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:x,placeholder:"Please select",treeDefaultExpandAll:!0,onChange:C,className:"mb-2"})]}),a(P,{title:"Basic Modal",open:f,onOk:S,onCancel:k,children:d("form",{onSubmit:w(M),children:[a(n,{name:"name",label:"Name",control:l,rules:void 0}),a(n,{name:"anotherName",label:"Another Name",control:l,rules:void 0}),a(n,{name:"des",label:"Description",control:l,rules:void 0}),a(n,{name:"sumSeri",label:"Sum seri",control:l,rules:void 0}),a(n,{name:"type",label:"Type",control:l,rules:void 0}),a(n,{name:"week",label:"Week",control:l,rules:void 0}),a(n,{name:"time",label:"Duration",control:l,rules:void 0}),a(n,{name:"isActive",label:"isActive",control:l,rules:void 0}),a(n,{name:"year",label:"Year",control:l,rules:void 0}),a(n,{name:"up",label:"Set",control:l,rules:void 0}),a(n,{name:"hour",label:"Hour",control:l,rules:void 0}),a(R,{name:"week",label:"Theo tu\u1EA7n",control:l,placeholder:"Week",defaultValue:"Week",options:T}),a(X,{name:"file",label:"Upload",control:l}),a(r,{htmlType:"submit",className:"mt-2",children:"Create"})]})}),a(B,{columns:H,dataSource:V,scroll:{x:1e3,y:1e3},pagination:{defaultPageSize:20,showSizeChanger:!0,pageSizeOptions:["20","40","60"]}})]})};export{se as default};
