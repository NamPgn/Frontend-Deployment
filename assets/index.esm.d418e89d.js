import{R as x}from"./index.d32df28d.js";var ne=e=>e.type==="checkbox",Y=e=>e instanceof Date,O=e=>e==null;const $e=e=>typeof e=="object";var C=e=>!O(e)&&!Array.isArray(e)&&$e(e)&&!Y(e),Ke=e=>C(e)&&e.target?ne(e.target)?e.target.checked:e.target.value:e,ht=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ge=(e,s)=>e.has(ht(s)),ae=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,c=(e,s,t)=>{if(!s||!C(e))return t;const i=ae(s.split(/[,[\].]+?/)).reduce((a,u)=>O(a)?a:a[u],e);return k(i)||i===e?k(e[s])?t:e[s]:i};const de={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},P={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},W={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},gt=x.createContext(null),Ee=()=>x.useContext(gt);var ze=(e,s,t,i=!0)=>{const a={defaultValues:s._defaultValues};for(const u in e)Object.defineProperty(a,u,{get:()=>{const _=u;return s._proxyFormState[_]!==P.all&&(s._proxyFormState[_]=!i||P.all),t&&(t[_]=!0),e[_]}});return a},B=e=>C(e)&&!Object.keys(e).length,Je=(e,s,t)=>{const{name:i,...a}=e;return B(a)||Object.keys(a).length>=Object.keys(s).length||Object.keys(a).find(u=>s[u]===(!t||P.all))},ce=e=>Array.isArray(e)?e:[e],Qe=(e,s,t)=>t&&s?e===s:!e||!s||e===s||ce(e).some(i=>i&&(i.startsWith(s)||s.startsWith(i)));function Ce(e){const s=x.useRef(e);s.current=e,x.useEffect(()=>{const t=!e.disabled&&s.current.subject.subscribe({next:s.current.callback});return()=>{t&&t.unsubscribe()}},[e.disabled])}function _t(e){const s=Ee(),{control:t=s.control,disabled:i,name:a,exact:u}=e||{},[_,h]=x.useState(t._formState),m=x.useRef(!0),A=x.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),b=x.useRef(a);return b.current=a,Ce({disabled:i,callback:x.useCallback(g=>m.current&&Qe(b.current,g.name,u)&&Je(g,A.current)&&h({...t._formState,...g}),[t,u]),subject:t._subjects.state}),x.useEffect(()=>{m.current=!0;const g=t._proxyFormState.isDirty&&t._getDirty();return g!==t._formState.isDirty&&t._subjects.state.next({isDirty:g}),t._updateValid(),()=>{m.current=!1}},[t]),ze(_,t,A.current,!1)}var N=e=>typeof e=="string",Xe=(e,s,t,i)=>N(e)?(i&&s.watch.add(e),c(t,e)):Array.isArray(e)?e.map(a=>(i&&s.watch.add(a),c(t,a))):(i&&(s.watchAll=!0),t),vt=e=>{const s=e.constructor&&e.constructor.prototype;return C(s)&&s.hasOwnProperty("isPrototypeOf")},De=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $(e){let s;const t=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(De&&(e instanceof Blob||e instanceof FileList))&&(t||C(e)))if(s=t?[]:{},!Array.isArray(e)&&!vt(e))s=e;else for(const i in e)s[i]=$(e[i]);else return e;return s}function bt(e){const s=Ee(),{control:t=s.control,name:i,defaultValue:a,disabled:u,exact:_}=e||{},h=x.useRef(i);h.current=i,Ce({disabled:u,subject:t._subjects.watch,callback:b=>{if(Qe(h.current,b.name,_)){const g=Xe(h.current,t._names,b.values||t._formValues);A(k(g)?a:$(g))}}});const[m,A]=x.useState(k(a)?t._getWatch(i):a);return x.useEffect(()=>t._removeUnmounted()),m}function At(e){const s=Ee(),{name:t,control:i=s.control,shouldUnregister:a}=e,u=Ge(i._names.array,t),_=bt({control:i,name:t,defaultValue:c(i._formValues,t,c(i._defaultValues,t,e.defaultValue)),exact:!0}),h=_t({control:i,name:t}),m=x.useRef(i.register(t,{...e.rules,value:_}));return x.useEffect(()=>{const A=(b,g)=>{const K=c(i._fields,b);K&&(K._f.mount=g)};return A(t,!0),()=>{const b=i._options.shouldUnregister||a;(u?b&&!i._stateFlags.action:b)?i.unregister(t):A(t,!1)}},[t,i,u,a]),{field:{name:t,value:_,onChange:x.useCallback(A=>m.current.onChange({target:{value:Ke(A),name:t},type:de.CHANGE}),[t]),onBlur:x.useCallback(()=>m.current.onBlur({target:{value:c(i._formValues,t),name:t},type:de.BLUR}),[t,i]),ref:A=>{const b=c(i._fields,t);b&&A&&(b._f.ref={focus:()=>A.focus(),select:()=>A.select(),setCustomValidity:g=>A.setCustomValidity(g),reportValidity:()=>A.reportValidity()})}},formState:h,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(h.errors,t)},isDirty:{enumerable:!0,get:()=>!!c(h.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!c(h.touchedFields,t)},error:{enumerable:!0,get:()=>c(h.errors,t)}})}}const Ut=e=>e.render(At(e));var Ft=(e,s,t,i,a)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:a||!0}}:{},Re=e=>/^\w*$/.test(e),Ye=e=>ae(e.replace(/["|']|\]/g,"").split(/\.|\[/));function w(e,s,t){let i=-1;const a=Re(s)?[s]:Ye(s),u=a.length,_=u-1;for(;++i<u;){const h=a[i];let m=t;if(i!==_){const A=e[h];m=C(A)||Array.isArray(A)?A:isNaN(+a[i+1])?{}:[]}e[h]=m,e=e[h]}return e}const ke=(e,s,t)=>{for(const i of t||Object.keys(e)){const a=c(e,i);if(a){const{_f:u,..._}=a;if(u&&s(u.name)){if(u.ref.focus){u.ref.focus();break}else if(u.refs&&u.refs[0].focus){u.refs[0].focus();break}}else C(_)&&ke(_,s)}}};var pe=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length)))),mt=(e,s,t)=>{const i=ae(c(e,t));return w(i,"root",s[t]),w(e,t,i),e},ee=e=>typeof e=="boolean",Te=e=>e.type==="file",ye=e=>typeof e=="function",fe=e=>N(e)||x.isValidElement(e),Oe=e=>e.type==="radio",he=e=>e instanceof RegExp;const Pe={value:!1,isValid:!1},Ne={value:!0,isValid:!0};var Ze=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?Ne:{value:e[0].value,isValid:!0}:Ne:Pe}return Pe};const Ie={isValid:!1,value:null};var et=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Ie):Ie;function qe(e,s,t="validate"){if(fe(e)||Array.isArray(e)&&e.every(fe)||ee(e)&&!e)return{type:t,message:fe(e)?e:"",ref:s}}var X=e=>C(e)&&!he(e)?e:{value:e,message:""},We=async(e,s,t,i,a)=>{const{ref:u,refs:_,required:h,maxLength:m,minLength:A,min:b,max:g,pattern:K,validate:H,name:L,valueAsNumber:_e,mount:j,disabled:z}=e._f;if(!j||z)return{};const I=_?_[0]:u,q=v=>{i&&I.reportValidity&&(I.setCustomValidity(ee(v)?"":v||""),I.reportValidity())},S={},te=Oe(u),le=ne(u),G=te||le,J=(_e||Te(u))&&!u.value||s===""||Array.isArray(s)&&!s.length,U=Ft.bind(null,L,t,S),oe=(v,F,E,R=W.maxLength,p=W.minLength)=>{const M=v?F:E;S[L]={type:v?R:p,message:M,ref:u,...U(v?R:p,M)}};if(a?!Array.isArray(s)||!s.length:h&&(!G&&(J||O(s))||ee(s)&&!s||le&&!Ze(_).isValid||te&&!et(_).isValid)){const{value:v,message:F}=fe(h)?{value:!!h,message:h}:X(h);if(v&&(S[L]={type:W.required,message:F,ref:I,...U(W.required,F)},!t))return q(F),S}if(!J&&(!O(b)||!O(g))){let v,F;const E=X(g),R=X(b);if(!O(s)&&!isNaN(s)){const p=u.valueAsNumber||s&&+s;O(E.value)||(v=p>E.value),O(R.value)||(F=p<R.value)}else{const p=u.valueAsDate||new Date(s),M=ue=>new Date(new Date().toDateString()+" "+ue),re=u.type=="time",Q=u.type=="week";N(E.value)&&s&&(v=re?M(s)>M(E.value):Q?s>E.value:p>new Date(E.value)),N(R.value)&&s&&(F=re?M(s)<M(R.value):Q?s<R.value:p<new Date(R.value))}if((v||F)&&(oe(!!v,E.message,R.message,W.max,W.min),!t))return q(S[L].message),S}if((m||A)&&!J&&(N(s)||a&&Array.isArray(s))){const v=X(m),F=X(A),E=!O(v.value)&&s.length>v.value,R=!O(F.value)&&s.length<F.value;if((E||R)&&(oe(E,v.message,F.message),!t))return q(S[L].message),S}if(K&&!J&&N(s)){const{value:v,message:F}=X(K);if(he(v)&&!s.match(v)&&(S[L]={type:W.pattern,message:F,ref:u,...U(W.pattern,F)},!t))return q(F),S}if(H){if(ye(H)){const v=await H(s),F=qe(v,I);if(F&&(S[L]={...F,...U(W.validate,F.message)},!t))return q(F.message),S}else if(C(H)){let v={};for(const F in H){if(!B(v)&&!t)break;const E=qe(await H[F](s),I,F);E&&(v={...E,...U(F,E.message)},q(E.message),t&&(S[L]=v))}if(!B(v)&&(S[L]={ref:I,...v},!t))return S}}return q(!0),S},He=e=>({isOnSubmit:!e||e===P.onSubmit,isOnBlur:e===P.onBlur,isOnChange:e===P.onChange,isOnAll:e===P.all,isOnTouch:e===P.onTouched});function wt(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=k(e)?i++:e[s[i++]];return e}function xt(e){for(const s in e)if(!k(e[s]))return!1;return!0}function T(e,s){const t=Re(s)?[s]:Ye(s),i=t.length==1?e:wt(e,t),a=t[t.length-1];let u;i&&delete i[a];for(let _=0;_<t.slice(0,-1).length;_++){let h=-1,m;const A=t.slice(0,-(_+1)),b=A.length-1;for(_>0&&(u=e);++h<A.length;){const g=A[h];m=m?m[g]:e[g],b===h&&(C(m)&&B(m)||Array.isArray(m)&&xt(m))&&(u?delete u[g]:delete e[g]),u=m}}return e}function me(){let e=[];return{get observers(){return e},next:a=>{for(const u of e)u.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(u=>u!==a)}}),unsubscribe:()=>{e=[]}}}var ie=e=>O(e)||!$e(e);function Z(e,s){if(ie(e)||ie(s))return e===s;if(Y(e)&&Y(s))return e.getTime()===s.getTime();const t=Object.keys(e),i=Object.keys(s);if(t.length!==i.length)return!1;for(const a of t){const u=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const _=s[a];if(Y(u)&&Y(_)||C(u)&&C(_)||Array.isArray(u)&&Array.isArray(_)?!Z(u,_):u!==_)return!1}}return!0}var Se=e=>{const s=e?e.ownerDocument:0,t=s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement;return e instanceof t},tt=e=>e.type==="select-multiple",Vt=e=>Oe(e)||ne(e),we=e=>Se(e)&&e.isConnected,rt=e=>{for(const s in e)if(ye(e[s]))return!0;return!1};function ge(e,s={}){const t=Array.isArray(e);if(C(e)||t)for(const i in e)Array.isArray(e[i])||C(e[i])&&!rt(e[i])?(s[i]=Array.isArray(e[i])?[]:{},ge(e[i],s[i])):O(e[i])||(s[i]=!0);return s}function st(e,s,t){const i=Array.isArray(e);if(C(e)||i)for(const a in e)Array.isArray(e[a])||C(e[a])&&!rt(e[a])?k(s)||ie(t[a])?t[a]=Array.isArray(e[a])?ge(e[a],[]):{...ge(e[a])}:st(e[a],O(s)?{}:s[a],t[a]):Z(e[a],s[a])?delete t[a]:t[a]=!0;return t}var xe=(e,s)=>st(e,s,ge(s)),it=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>k(e)?e:s?e===""?NaN:e&&+e:t&&N(e)?new Date(e):i?i(e):e;function Ve(e){const s=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):s.disabled))return Te(s)?s.files:Oe(s)?et(e.refs).value:tt(s)?[...s.selectedOptions].map(({value:t})=>t):ne(s)?Ze(e.refs).value:it(k(s.value)?e.ref.value:s.value,e)}var Dt=(e,s,t,i)=>{const a={};for(const u of e){const _=c(s,u);_&&w(a,u,_._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:i}},se=e=>k(e)?e:he(e)?e.source:C(e)?he(e.value)?e.value.source:e.value:e,kt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function je(e,s,t){const i=c(e,t);if(i||Re(t))return{error:i,name:t};const a=t.split(".");for(;a.length;){const u=a.join("."),_=c(s,u),h=c(e,u);if(_&&!Array.isArray(_)&&t!==u)return{name:t};if(h&&h.type)return{name:u,error:h};a.pop()}return{name:t}}var St=(e,s,t,i,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(s||e):(t?i.isOnBlur:a.isOnBlur)?!e:(t?i.isOnChange:a.isOnChange)?e:!0,Et=(e,s)=>!ae(c(e,s)).length&&T(e,s);const Ct={mode:P.onSubmit,reValidateMode:P.onChange,shouldFocusError:!0};function Rt(e={}){let s={...Ct,...e},t={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},a=$(s.defaultValues)||{},u=s.shouldUnregister?{}:$(a),_={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},m,A=0;const b={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={watch:me(),array:me(),state:me()},K=He(s.mode),H=He(s.reValidateMode),L=s.criteriaMode===P.all,_e=r=>n=>{clearTimeout(A),A=window.setTimeout(r,n)},j=async()=>{if(b.isValid){const r=s.resolver?B((await G()).errors):await U(i,!0);r!==t.isValid&&(t.isValid=r,g.state.next({isValid:r}))}},z=r=>b.isValidating&&r!==t.isValidating&&g.state.next({isValidating:r}),I=(r,n=[],l,f,d=!0,o=!0)=>{if(f&&l){if(_.action=!0,o&&Array.isArray(c(i,r))){const y=l(c(i,r),f.argA,f.argB);d&&w(i,r,y)}if(o&&Array.isArray(c(t.errors,r))){const y=l(c(t.errors,r),f.argA,f.argB);d&&w(t.errors,r,y),Et(t.errors,r)}if(b.touchedFields&&o&&Array.isArray(c(t.touchedFields,r))){const y=l(c(t.touchedFields,r),f.argA,f.argB);d&&w(t.touchedFields,r,y)}b.dirtyFields&&(t.dirtyFields=xe(a,u)),g.state.next({name:r,isDirty:v(r,n),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else w(u,r,n)},q=(r,n)=>{w(t.errors,r,n),g.state.next({errors:t.errors})},S=(r,n,l,f)=>{const d=c(i,r);if(d){const o=c(u,r,k(l)?c(a,r):l);k(o)||f&&f.defaultChecked||n?w(u,r,n?o:Ve(d._f)):R(r,o),_.mount&&j()}},te=(r,n,l,f,d)=>{let o=!1,y=!1;const V={name:r};if((!l||f)&&(b.isDirty&&(y=t.isDirty,t.isDirty=V.isDirty=v(),o=y!==V.isDirty),b.dirtyFields)){y=c(t.dirtyFields,r);const D=Z(c(a,r),n);D?T(t.dirtyFields,r):w(t.dirtyFields,r,!0),V.dirtyFields=t.dirtyFields,o=o||y!==!D}if(l){const D=c(t.touchedFields,r);D||(w(t.touchedFields,r,l),V.touchedFields=t.touchedFields,o=o||b.touchedFields&&D!==l)}return o&&d&&g.state.next(V),o?V:{}},le=(r,n,l,f)=>{const d=c(t.errors,r),o=b.isValid&&ee(n)&&t.isValid!==n;if(e.delayError&&l?(m=_e(()=>q(r,l)),m(e.delayError)):(clearTimeout(A),m=null,l?w(t.errors,r,l):T(t.errors,r)),(l?!Z(d,l):d)||!B(f)||o){const y={...f,...o&&ee(n)?{isValid:n}:{},errors:t.errors,name:r};t={...t,...y},g.state.next(y)}z(!1)},G=async r=>await s.resolver(u,s.context,Dt(r||h.mount,i,s.criteriaMode,s.shouldUseNativeValidation)),J=async r=>{const{errors:n}=await G();if(r)for(const l of r){const f=c(n,l);f?w(t.errors,l,f):T(t.errors,l)}else t.errors=n;return n},U=async(r,n,l={valid:!0})=>{for(const f in r){const d=r[f];if(d){const{_f:o,...y}=d;if(o){const V=h.array.has(o.name),D=await We(d,c(u,o.name),L,s.shouldUseNativeValidation,V);if(D[o.name]&&(l.valid=!1,n))break;!n&&(c(D,o.name)?V?mt(t.errors,D,o.name):w(t.errors,o.name,D[o.name]):T(t.errors,o.name))}y&&await U(y,n,l)}}return l.valid},oe=()=>{for(const r of h.unMount){const n=c(i,r);n&&(n._f.refs?n._f.refs.every(l=>!we(l)):!we(n._f.ref))&&ve(r)}h.unMount=new Set},v=(r,n)=>(r&&n&&w(u,r,n),!Z(ue(),a)),F=(r,n,l)=>Xe(r,h,{..._.mount?u:k(n)?a:N(r)?{[r]:n}:n},l),E=r=>ae(c(_.mount?u:a,r,e.shouldUnregister?c(a,r,[]):[])),R=(r,n,l={})=>{const f=c(i,r);let d=n;if(f){const o=f._f;o&&(!o.disabled&&w(u,r,it(n,o)),d=De&&Se(o.ref)&&O(n)?"":n,tt(o.ref)?[...o.ref.options].forEach(y=>y.selected=d.includes(y.value)):o.refs?ne(o.ref)?o.refs.length>1?o.refs.forEach(y=>(!y.defaultChecked||!y.disabled)&&(y.checked=Array.isArray(d)?!!d.find(V=>V===y.value):d===y.value)):o.refs[0]&&(o.refs[0].checked=!!d):o.refs.forEach(y=>y.checked=y.value===d):Te(o.ref)?o.ref.value="":(o.ref.value=d,o.ref.type||g.watch.next({name:r})))}(l.shouldDirty||l.shouldTouch)&&te(r,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&Q(r)},p=(r,n,l)=>{for(const f in n){const d=n[f],o=`${r}.${f}`,y=c(i,o);(h.array.has(r)||!ie(d)||y&&!y._f)&&!Y(d)?p(o,d,l):R(o,d,l)}},M=(r,n,l={})=>{const f=c(i,r),d=h.array.has(r),o=$(n);w(u,r,o),d?(g.array.next({name:r,values:u}),(b.isDirty||b.dirtyFields)&&l.shouldDirty&&(t.dirtyFields=xe(a,u),g.state.next({name:r,dirtyFields:t.dirtyFields,isDirty:v(r,o)}))):f&&!f._f&&!O(o)?p(r,o,l):R(r,o,l),pe(r,h)&&g.state.next({}),g.watch.next({name:r})},re=async r=>{const n=r.target;let l=n.name;const f=c(i,l),d=()=>n.type?Ve(f._f):Ke(r);if(f){let o,y;const V=d(),D=r.type===de.BLUR||r.type===de.FOCUS_OUT,ft=!kt(f._f)&&!s.resolver&&!c(t.errors,l)&&!f._f.deps||St(D,c(t.touchedFields,l),t.isSubmitted,H,K),Ae=pe(l,h,D);w(u,l,V),D?(f._f.onBlur&&f._f.onBlur(r),m&&m(0)):f._f.onChange&&f._f.onChange(r);const Fe=te(l,V,D,!1),dt=!B(Fe)||Ae;if(!D&&g.watch.next({name:l,type:r.type}),ft)return b.isValid&&j(),dt&&g.state.next({name:l,...Ae?{}:Fe});if(!D&&Ae&&g.state.next({}),z(!0),s.resolver){const{errors:Me}=await G([l]),yt=je(t.errors,i,l),Be=je(Me,i,yt.name||l);o=Be.error,l=Be.name,y=B(Me)}else o=(await We(f,c(u,l),L,s.shouldUseNativeValidation))[l],o?y=!1:b.isValid&&(y=await U(i,!0));!ie(V)||d()===V?(f._f.deps&&Q(f._f.deps),le(l,y,o,Fe)):z(!1)}},Q=async(r,n={})=>{let l,f;const d=ce(r);if(z(!0),s.resolver){const o=await J(k(r)?r:d);l=B(o),f=r?!d.some(y=>c(o,y)):l}else r?(f=(await Promise.all(d.map(async o=>{const y=c(i,o);return await U(y&&y._f?{[o]:y}:y)}))).every(Boolean),!(!f&&!t.isValid)&&j()):f=l=await U(i);return g.state.next({...!N(r)||b.isValid&&l!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:l}:{},errors:t.errors,isValidating:!1}),n.shouldFocus&&!f&&ke(i,o=>o&&c(t.errors,o),r?d:h.mount),f},ue=r=>{const n={...a,..._.mount?u:{}};return k(r)?n:N(r)?c(n,r):r.map(l=>c(n,l))},Le=(r,n)=>({invalid:!!c((n||t).errors,r),isDirty:!!c((n||t).dirtyFields,r),isTouched:!!c((n||t).touchedFields,r),error:c((n||t).errors,r)}),nt=r=>{r?ce(r).forEach(n=>T(t.errors,n)):t.errors={},g.state.next({errors:t.errors})},at=(r,n,l)=>{const f=(c(i,r,{_f:{}})._f||{}).ref;w(t.errors,r,{...n,ref:f}),g.state.next({name:r,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&f&&f.focus&&f.focus()},lt=(r,n)=>ye(r)?g.watch.subscribe({next:l=>r(F(void 0,n),l)}):F(r,n,!0),ve=(r,n={})=>{for(const l of r?ce(r):h.mount)h.mount.delete(l),h.array.delete(l),c(i,l)&&(n.keepValue||(T(i,l),T(u,l)),!n.keepError&&T(t.errors,l),!n.keepDirty&&T(t.dirtyFields,l),!n.keepTouched&&T(t.touchedFields,l),!s.shouldUnregister&&!n.keepDefaultValue&&T(a,l));g.watch.next({}),g.state.next({...t,...n.keepDirty?{isDirty:v()}:{}}),!n.keepIsValid&&j()},be=(r,n={})=>{let l=c(i,r);const f=ee(n.disabled);return w(i,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...n}}),h.mount.add(r),l?f&&w(u,r,n.disabled?void 0:c(u,r,Ve(l._f))):S(r,!0,n.value),{...f?{disabled:n.disabled}:{},...s.shouldUseNativeValidation?{required:!!n.required,min:se(n.min),max:se(n.max),minLength:se(n.minLength),maxLength:se(n.maxLength),pattern:se(n.pattern)}:{},name:r,onChange:re,onBlur:re,ref:d=>{if(d){be(r,n),l=c(i,r);const o=k(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,y=Vt(o),V=l._f.refs||[];if(y?V.find(D=>D===o):o===l._f.ref)return;w(i,r,{_f:{...l._f,...y?{refs:[...V.filter(we),o,...Array.isArray(c(a,r))?[{}]:[]],ref:{type:o.type,name:r}}:{ref:o}}}),S(r,!1,void 0,o)}else l=c(i,r,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||n.shouldUnregister)&&!(Ge(h.array,r)&&_.action)&&h.unMount.add(r)}}},Ue=()=>s.shouldFocusError&&ke(i,r=>r&&c(t.errors,r),h.mount),ot=(r,n)=>async l=>{l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=!0,d=$(u);g.state.next({isSubmitting:!0});try{if(s.resolver){const{errors:o,values:y}=await G();t.errors=o,d=y}else await U(i);B(t.errors)?(g.state.next({errors:{},isSubmitting:!0}),await r(d,l)):(n&&await n({...t.errors},l),Ue())}catch(o){throw f=!1,o}finally{t.isSubmitted=!0,g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(t.errors)&&f,submitCount:t.submitCount+1,errors:t.errors})}},ut=(r,n={})=>{c(i,r)&&(k(n.defaultValue)?M(r,c(a,r)):(M(r,n.defaultValue),w(a,r,n.defaultValue)),n.keepTouched||T(t.touchedFields,r),n.keepDirty||(T(t.dirtyFields,r),t.isDirty=n.defaultValue?v(r,c(a,r)):v()),n.keepError||(T(t.errors,r),b.isValid&&j()),g.state.next({...t}))},ct=(r,n={})=>{const l=r||a,f=$(l),d=r&&!B(r)?f:a;if(n.keepDefaultValues||(a=l),!n.keepValues){if(n.keepDirtyValues)for(const o of h.mount)c(t.dirtyFields,o)?w(d,o,c(u,o)):M(o,c(d,o));else{if(De&&k(r))for(const o of h.mount){const y=c(i,o);if(y&&y._f){const V=Array.isArray(y._f.refs)?y._f.refs[0]:y._f.ref;if(Se(V)){const D=V.closest("form");if(D){D.reset();break}}}}i={}}u=e.shouldUnregister?n.keepDefaultValues?$(a):{}:f,g.array.next({values:d}),g.watch.next({values:d})}h={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},_.mount=!b.isValid||!!n.keepIsValid,_.watch=!!e.shouldUnregister,g.state.next({submitCount:n.keepSubmitCount?t.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?t.isDirty:!!(n.keepDefaultValues&&!Z(r,a)),isSubmitted:n.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:n.keepDirty||n.keepDirtyValues?t.dirtyFields:n.keepDefaultValues&&r?xe(a,r):{},touchedFields:n.keepTouched?t.touchedFields:{},errors:n.keepErrors?t.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:be,unregister:ve,getFieldState:Le,_executeSchema:G,_focusError:Ue,_getWatch:F,_getDirty:v,_updateValid:j,_removeUnmounted:oe,_updateFieldArray:I,_getFieldArray:E,_subjects:g,_proxyFormState:b,get _fields(){return i},get _formValues(){return u},get _stateFlags(){return _},set _stateFlags(r){_=r},get _defaultValues(){return a},get _names(){return h},set _names(r){h=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:Q,register:be,handleSubmit:ot,watch:lt,setValue:M,getValues:ue,reset:(r,n)=>ct(ye(r)?r(u):r,n),resetField:ut,clearErrors:nt,unregister:ve,setError:at,setFocus:(r,n={})=>{const l=c(i,r),f=l&&l._f;if(f){const d=f.refs?f.refs[0]:f.ref;d.focus&&(d.focus(),n.shouldSelect&&d.select())}},getFieldState:Le}}function Mt(e={}){const s=x.useRef(),[t,i]=x.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues});s.current||(s.current={...Rt(e),formState:t});const a=s.current.control;return a._options=e,Ce({subject:a._subjects.state,callback:x.useCallback(u=>{Je(u,a._proxyFormState,!0)&&(a._formState={...a._formState,...u},i({...a._formState}))},[a])}),x.useEffect(()=>{a._stateFlags.mount||(a._proxyFormState.isValid&&a._updateValid(),a._stateFlags.mount=!0),a._stateFlags.watch&&(a._stateFlags.watch=!1,a._subjects.state.next({})),a._removeUnmounted()}),x.useEffect(()=>{t.submitCount&&a._focusError()},[a,t.submitCount]),s.current.formState=ze(t,a),s.current}export{Ut as C,Ft as a,c as g,w as s,Mt as u};
