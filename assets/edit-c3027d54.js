import{r as n,u as k,d as I,j as s,Q as d}from"./vendor-0710fd16.js";import{D as V,g as L,e as A,E as C,G as U,c as E,w as r,H as P,I as D,q as b,J as F,K as N,O as T,U as _}from"./index-b2596b2e.js";import{M as h}from"./index-8b897561.js";import{M as j}from"./index-fb9e1258.js";const H=()=>{var x;const{seri:o}=n.useContext(V),[v,m]=n.useState(!1),{data:c}=L(e=>e.category.category),{id:u}=k(),{handleSubmit:g,reset:f,control:i}=I(),p=A(),[l,S]=n.useState({});n.useEffect(()=>{(async()=>{const{payload:a}=await p(N(u));f(a),S(a)})()},[]),n.useEffect(()=>{p(C(0))},[]);const w=async e=>{var y;const a=new FormData;a.append("name",e.name),a.append("slug",e.slug),a.append("category",e.category._id),a.append("_id",e._id),a.append("seri",e.seri),a.append("LinkCopyright",e.LinkCopyright),a.append("copyright",e.copyright),a.append("trailer",e.trailer),a.append("image",e.image),a.append("typeId",e.typeId),a.append("categorymain",e.categorymain),a.append("dailyMotionServer",e.dailyMotionServer),a.append("link",e.link),a.append("imageLink",e.image),a.append("view",e.view),a.append("server2",e.server2);const t=await p(T(a));((y=t==null?void 0:t.meta)==null?void 0:y.requestStatus)=="fulfilled"&&d.success(`Edit ${e.name} Success`)},M=async e=>{try{const a=new FormData;a.append("fileupload",e.fileupload),await _(u,a)&&(d.success(`${e.name} Susscessfully Uploaded`),m(!0))}catch{d.success(`${e.name} Failer Uploaded`)}finally{m(!1)}};return s.jsxs("div",{children:[s.jsx(U,{level:4,children:s.jsx(E,{to:`/d/${l==null?void 0:l.slug}`,children:(l==null?void 0:l.name)+" tập "+(l==null?void 0:l.seri)})}),s.jsxs("form",{onSubmit:g(w),children:[s.jsx(r,{name:"name",label:"Product name",control:i,rules:void 0}),s.jsx(r,{name:"slug",label:"Slug",control:i,rules:void 0}),s.jsx(r,{name:"seri",label:"Seri",control:i,rules:void 0}),s.jsx(r,{name:"view",label:"View",control:i,rules:void 0}),s.jsx(r,{name:"LinkCopyright",label:"LinkCopyright",control:i,rules:void 0}),s.jsx(r,{name:"link",label:"Video Url",control:i,rules:void 0}),s.jsx(r,{name:"dailyMotionServer",label:"DailyMotionServer",control:i,rules:void 0}),s.jsx(r,{name:"server2",label:"Assb server",control:i,rules:void 0}),s.jsx(r,{name:"trailer",label:"Trailer Video",control:i,rules:void 0}),s.jsx("div",{style:{width:"150px",height:"200px"},children:s.jsx(P,{src:D(200,(x=l==null?void 0:l.category)==null?void 0:x.linkImg),className:"w-full h-full"})}),s.jsx("br",{}),s.jsx(j,{name:"image",label:"New Image Upload",control:i}),s.jsx(r,{name:"imageLink",label:"Image Link",control:i,rules:void 0}),s.jsx(h,{label:"Category",control:i,name:"category",defaultValue:"category",options:c&&c.map((e,a)=>({label:e.name,value:e._id}))}),s.jsx("br",{}),s.jsx(h,{name:"typeId",label:"Thể loại của phim lẻ",control:i,defaultValue:"Thể loại",options:o&&(o==null?void 0:o.map((e,a)=>({label:e.name,value:e._id})))}),s.jsx("br",{}),s.jsx("br",{}),s.jsx(b,{htmlType:"submit",className:"btn btn-primary mt-2",children:"Submit"})]}),s.jsx(F,{textColor:"#000",orientation:"center",children:"Abyss Server"}),s.jsxs("form",{onSubmit:g(M),children:[s.jsx(j,{name:"fileupload",label:"New Video Upload",control:i}),s.jsx("div",{className:"mt-2",children:s.jsx(b,{loading:v,htmlType:"submit",className:"btn btn-primary",children:"Submit"})})]})]})};export{H as default};
