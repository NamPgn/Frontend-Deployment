import{g as w,l as M,b1 as A,r as d,i as T,k as D,b2 as V,j as a,aj as j,b as o,c as E,p as r,R as F,b3 as h,m as N,o as y,H as _,b4 as I,am as l,b5 as R,Q as i,b6 as z}from"./index.065b9974.js";import{p as G}from"./type.e198d0dd.js";import{M as P}from"./index.0bd7014f.js";import{M as W}from"./index.2f9b8016.js";import"./DeleteOutlined.f5d20cd5.js";import"./DownloadOutlined.c87e0c8d.js";const J=()=>{const c=w(),p=M(A),{seri:u,weeks:n}=d.exports.useContext(T),[m,g]=d.exports.useState(null),{handleSubmit:b,control:t,register:O}=D(),f=async e=>{const s=new FormData;s.append("name",e.name),s.append("des",e.des),s.append("sumSeri",e.sumSeri),s.append("week",e.week),s.append("type",e.type),s.append("file",e.file),s.append("up",e.up),(await c(R(s))).payload.success?i.success("Th\xE0nh c\xF4ng"):i.error("Th\u1EA5t b\u1EA1i")},S=e=>{e?(i.success("Delete Success"),c(z(e))):i.error("Delete Fail")};d.exports.useEffect(()=>{c(V())},[]);const x=e=>{g(e)},C=async e=>{await G(m,{categoryId:e})},k=n&&(n==null?void 0:n.map((e,s)=>({label:e.name,value:e._id}))),v=p.data&&p.data.map((e,s)=>({key:e._id,stt:s+1,name:e.name,image:a(j,{width:150,height:200,style:{objectFit:"cover"},src:e.linkImg}),createAt:e.createdAt,action:o("div",{className:"flex gap-1",children:[a(E,{to:`/dashboard/category/edit/${e._id}`,children:a(r,{style:{background:"#1677ff"},type:"primary",children:"Edit"})}),a(r,{danger:!0,className:"text-light ml-2",onClick:()=>S(e._id),children:"Delete"}),a(r,{className:"text-light ml-2",onClick:()=>C(e._id),children:"Push"})]})}));return o(F.Fragment,{children:[a("div",{className:"p-2",style:{display:"flex",gap:"0 10px",justifyContent:"center"},children:u&&u.map((e,s)=>a("div",{children:e.path=="/"?"":a(h.Group,{value:m,children:a(h,{onChange:()=>x(e._id),children:e.name})})},s))}),o(N,{gutter:10,children:[a(y,{span:18,children:a(_,{columns:I,dataSource:v,pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","20","30"]}})}),a(y,{span:6,children:o("form",{onSubmit:b(f),children:[a(l,{name:"name",label:"Name",control:t,rules:void 0}),a(l,{name:"des",label:"Description",control:t,rules:void 0}),a(l,{name:"sumSeri",label:"Sum seri",control:t,rules:void 0}),a(l,{name:"type",label:"Type",control:t,rules:void 0}),a(l,{name:"week",label:"Week",control:t,rules:void 0}),a(l,{name:"up",label:"Set",control:t,rules:void 0}),a(P,{name:"week",label:"Theo tu\u1EA7n",control:t,placeholder:"Week",defaultValue:void 0,style:{width:200},options:k}),a(W,{name:"file",label:"Upload",control:t}),a(r,{htmlType:"submit",className:"mt-2",children:"Create"})]})})]})]})};export{J as default};
