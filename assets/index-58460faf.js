import{r as i,af as _,j as a,a_ as V,I as O,b0 as E,b1 as F,aW as d}from"./vendor-1341ff49.js";import{e as I,g as P,a1 as W,n as z,a2 as q,c as x,p as y,q as r,J as n,w as B,a3 as H,a4 as R,a5 as U,k as $,l as G}from"./index-8224cd36.js";import{p as J}from"./type-f7630558.js";import{M as L}from"./index-6dbadab0.js";import{M as Q}from"./index-4cdf2be8.js";const ae=()=>{const[j,p]=i.useState(!1),b=()=>{p(!0)},g=()=>{p(!1)},f=()=>{p(!1)},u=I(),m=P(W),{seri:c,weeks:o}=i.useContext(z),{handleSubmit:v,control:l}=_(),[h,S]=i.useState();i.useEffect(()=>{u(q(1))},[1]);const k=c&&(c==null?void 0:c.map((e,s)=>({label:s+1+" - "+e.name,value:e._id,children:e.categorymain.map((t,T)=>({label:T+1+" - "+t.cates.name,value:t.cates._id}))}))),w=e=>{S(e)},A=async e=>{const s=new FormData;s.append("name",e.name),s.append("des",e.des),s.append("sumSeri",e.sumSeri),s.append("week",e.week),s.append("type",e.type),s.append("file",e.file),s.append("up",e.up),s.append("time",e.time),s.append("isActive",e.isActive),s.append("year",e.year),s.append("anotherName",e.anotherName),s.append("hour",e.hour),(await u(R(s))).payload.success==!0?d.success("Thành công"):d.error("Thất bại")},C=async e=>{(await u(U(e))).payload?d.success("Delete Success"):d.error("Delete Failure")},M=async e=>{(await J(h,{categoryId:e})).data.success?$("Add category success!"):G("Failure!")},N=o&&(o==null?void 0:o.map((e,s)=>({label:e.name,value:e._id}))),D=m.data&&m.data.map((e,s)=>({key:e._id,stt:s+1,name:a.jsx(x,{to:"/q/"+e._id,children:e.name}),image:a.jsx(V,{width:150,height:200,style:{objectFit:"cover"},src:e.linkImg}),createAt:e.createdAt,duration:e.time,isActive:e.isActive==0?a.jsx(y,{color:"warning",children:"isPending"}):a.jsx(y,{color:"success",children:"Done"}),year:e.year,set:e.up,week:o&&o.map(t=>t._id==e.week&&t.name),action:a.jsxs("div",{className:"flex gap-1",children:[a.jsx(x,{to:`/dashboard/category/edit/${e._id}`,children:a.jsx(r,{style:{background:"#1677ff"},type:"primary",children:"Edit"})}),a.jsx(r,{danger:!0,className:"ml-2",onClick:()=>C(e._id),children:"Delete"}),a.jsx(r,{className:"ml-2",onClick:()=>M(e._id),children:"Push"})]})}));return a.jsxs(O.Fragment,{children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx(r,{type:"primary",onClick:b,children:"New"}),a.jsx(E,{style:{width:"100%"},value:h,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:k,placeholder:"Please select",treeDefaultExpandAll:!0,onChange:w,className:"mb-2"})]}),a.jsx(F,{title:"Basic Modal",open:j,onOk:g,onCancel:f,children:a.jsxs("form",{onSubmit:v(A),children:[a.jsx(n,{name:"name",label:"Name",control:l,rules:void 0}),a.jsx(n,{name:"anotherName",label:"Another Name",control:l,rules:void 0}),a.jsx(n,{name:"des",label:"Description",control:l,rules:void 0}),a.jsx(n,{name:"sumSeri",label:"Sum seri",control:l,rules:void 0}),a.jsx(n,{name:"type",label:"Type",control:l,rules:void 0}),a.jsx(n,{name:"week",label:"Week",control:l,rules:void 0}),a.jsx(n,{name:"time",label:"Duration",control:l,rules:void 0}),a.jsx(n,{name:"isActive",label:"isActive",control:l,rules:void 0}),a.jsx(n,{name:"year",label:"Year",control:l,rules:void 0}),a.jsx(n,{name:"up",label:"Set",control:l,rules:void 0}),a.jsx(n,{name:"hour",label:"Hour",control:l,rules:void 0}),a.jsx(L,{name:"week",label:"Theo tuần",control:l,placeholder:"Week",defaultValue:"Week",options:N}),a.jsx(Q,{name:"file",label:"Upload",control:l}),a.jsx(r,{htmlType:"submit",className:"mt-2",children:"Create"})]})}),a.jsx(B,{columns:H,dataSource:D,scroll:{x:1e3,y:1e3},pagination:{defaultPageSize:20,showSizeChanger:!0,pageSizeOptions:["20","40","60"]}})]})};export{ae as default};
