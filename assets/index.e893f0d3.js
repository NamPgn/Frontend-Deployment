import{g as E,k as A,aC as D,r as d,i as T,w as v,aD as F,j as a,ae as I,b as l,c as N,l as o,R as _,aE as m,aF as j,aG as y,C as M,aH as G,an as n,av as R,au as z,aI as P,Q as c,aJ as W}from"./index.10bebe39.js";import{p as O}from"./type.b76c9e88.js";const H=()=>{const i=E(),p=A(D),{seri:u,weeks:r}=d.exports.useContext(T),[h,g]=d.exports.useState(null),{handleSubmit:f,control:t,register:U}=v(),C=async e=>{const s=new FormData;s.append("name",e.name),s.append("des",e.des),s.append("sumSeri",e.sumSeri),s.append("week",e.week),s.append("type",e.type),s.append("file",e.file),(await i(P(s))).payload.success?c.success("Th\xE0nh c\xF4ng"):c.error("Th\u1EA5t b\u1EA1i")},x=e=>{e?(c.success("Delete Success"),i(W(e))):c.error("Delete Fail")};d.exports.useEffect(()=>{i(F())},[]);const b=e=>{g(e)},S=async e=>{await O(h,{categoryId:e})},k=r&&(r==null?void 0:r.map((e,s)=>({label:e.name,value:e._id}))),w=p.data&&p.data.map((e,s)=>({key:e._id,stt:s+1,name:e.name,image:a(I,{width:150,height:200,style:{objectFit:"cover"},src:e.linkImg}),createAt:e.createdAt,action:l("div",{className:"flex gap-1",children:[a(N,{to:`/dashboard/category/edit/${e._id}`,children:a(o,{style:{background:"#1677ff"},type:"primary",children:"Edit"})}),a(o,{danger:!0,className:"text-light ml-2",onClick:()=>x(e._id),children:"Delete"}),a(o,{className:"text-light ml-2",onClick:()=>S(e._id),children:"Push"})]})}));return l(_.Fragment,{children:[a("div",{className:"p-2",style:{display:"flex",gap:"0 10px",justifyContent:"center"},children:u&&u.map((e,s)=>a("div",{children:e.path=="/"?"":a(m.Group,{value:h,children:a(m,{name:"aa",onChange:()=>b(e._id),children:e.name})})},s))}),l(j,{gutter:10,children:[a(y,{span:18,children:a(M,{columns:G,dataSource:w,pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","20","30"]}})}),a(y,{span:6,children:l("form",{onSubmit:f(C),children:[n("name","Name",t),n("des","Description",t),n("sumSeri","T\u1ED5ng s\u1ED1 t\u1EADp",t),n("type","Ki\u1EC3u",t),n("week","Theo tu\u1EA7n",t),a(R,{name:"week",label:"Theo tu\u1EA7n",control:t,placeholder:"Week",defaultValue:void 0,style:{width:200},options:k}),a(z,{name:"file",label:"Upload",control:t}),a(o,{htmlType:"submit",className:"mt-2",children:"Create"})]})})]})]})};export{H as default};
