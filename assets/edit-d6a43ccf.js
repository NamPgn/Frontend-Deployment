import{r,w as M,ae as k,j as a,as as p}from"./vendor-c6feb40d.js";import{A as E,u as I,a as L,W as P,Y as V,h as A,P as n,Z as C,_ as T,c as b,$ as U,a0 as D,a1 as F,a2 as _}from"./index-3a949f9b.js";import{M as x}from"./index-8f14c485.js";import{M as h}from"./index-b7f11e4f.js";import{P as $}from"./index-3e4929b2.js";const Y=()=>{var f;const{seri:t}=r.useContext(E),[w,d]=r.useState(!1),{data:m}=I(e=>e.category.category),{id:u}=M(),{handleSubmit:g,reset:j,control:i}=k(),c=L(),[l,N]=r.useState({});r.useEffect(()=>{(async()=>{var o;const{payload:s}=await c(D(u));j({...s,category:(o=s.category)==null?void 0:o.name}),N(s)})()},[]),r.useEffect(()=>{c(P(0))},[]);const S=async e=>{var y;const s=new FormData;s.append("name",e.name),s.append("slug",e.slug),s.append("category",e.category._id),s.append("_id",e._id),s.append("seri",e.seri),s.append("LinkCopyright",e.LinkCopyright),s.append("copyright",e.copyright),s.append("trailer",e.trailer),s.append("image",e.image),s.append("typeId",e.typeId),s.append("categorymain",e.categorymain),s.append("dailyMotionServer",e.dailyMotionServer),s.append("link",e.link),s.append("imageLink",e.image),s.append("view",e.view),s.append("server2",e.server2);const o=await c(F(s));((y=o==null?void 0:o.meta)==null?void 0:y.requestStatus)=="fulfilled"&&p.success(`Edit ${e.name} Success`)},v=async e=>{try{const s=new FormData;s.append("fileupload",e.fileupload),await _(u,s)&&(p.success(`${e.name} Susscessfully Uploaded`),d(!0))}catch{p.success(`${e.name} Failer Uploaded`)}finally{d(!1)}};return a.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[a.jsx($,{title:`Edit Episode: ${(l==null?void 0:l.name)+" tập "+(l==null?void 0:l.seri)}`,subtitle:"Edit Episode Description"}),a.jsx(V,{level:4,className:"mb-4 text-lg font-semibold",children:a.jsx(A,{to:`/d/${l==null?void 0:l.slug}`,className:"text-blue-500 hover:underline",children:(l==null?void 0:l.name)+" tập "+(l==null?void 0:l.seri)})}),a.jsxs("form",{onSubmit:g(S),className:"space-y-4",children:[a.jsx(n,{name:"name",label:"Product name",control:i,className:"w-full"}),a.jsx(n,{name:"slug",label:"Slug",control:i,className:"w-full"}),a.jsx(n,{name:"seri",label:"Seri",control:i,className:"w-full"}),a.jsx(n,{name:"view",label:"View",control:i,className:"w-full"}),a.jsx(n,{name:"LinkCopyright",label:"LinkCopyright",control:i,className:"w-full"}),a.jsx(n,{name:"link",label:"Video Url",control:i,className:"w-full"}),a.jsx(n,{name:"dailyMotionServer",label:"DailyMotionServer",control:i,className:"w-full"}),a.jsx(n,{name:"server2",label:"Assb server",control:i,className:"w-full"}),a.jsx(n,{name:"trailer",label:"Trailer Video",control:i,className:"w-full"}),a.jsx("div",{className:" w-36",children:a.jsx(C,{src:T(200,(f=l==null?void 0:l.category)==null?void 0:f.linkImg),className:"object-cover rounded-md shadow-sm"})}),a.jsx(h,{name:"image",label:"New Image Upload",control:i,className:"w-full mt-4"}),a.jsx(n,{name:"imageLink",label:"Image Link",control:i,className:"w-full"}),a.jsx(x,{label:"Category",control:i,name:"category",options:m==null?void 0:m.map(e=>({label:e.name,value:e._id})),className:"w-full mt-4"}),a.jsx(x,{name:"typeId",label:"Thể loại của phim lẻ",control:i,defaultValue:"Thể loại",options:t==null?void 0:t.map(e=>({label:e.name,value:e._id})),className:"w-full mt-4"}),a.jsx(b,{htmlType:"submit",children:"Submit"})]}),a.jsx(U,{textColor:"#000",orientation:"center",className:"mt-8",children:"Abyss Server"}),a.jsxs("form",{onSubmit:g(v),className:"space-y-4 mt-4",children:[a.jsx(h,{name:"fileupload",label:"New Video Upload",control:i,className:"w-full"}),a.jsx(b,{loading:w,htmlType:"submit",children:"Submit"})]})]})};export{Y as default};
