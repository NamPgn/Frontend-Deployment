import{r as n,j as e,aR as J,a5 as ee,af as P,aQ as C,aS as b,aT as te,aU as se,aV as ae,aW as c,aX as re,aY as ne,aZ as ie,E as v,al as oe}from"./vendor-49842d85.js";import{g as M,n as le,f as ce,e as de,o as D,p as A,q as r,s as xe,t as o,v as m,c as l,w as he,x as pe,y as ue,z as ge,B as ye,C as me,D as je,k as j,l as f,E as fe,F as we,G as Ce,H as be}from"./index-7f1b6e33.js";const I=n.memo(({defaultValue:a,placeholder:d,style:x,options:p,...i})=>e.jsx(J,{placeholder:d,defaultValue:a,style:x,options:p,allowClear:!0,...i})),ve=n.memo(({products:a,isLoading:d})=>{const[x,p]=n.useState(1),i=M(t=>t.category.category),[O,S]=n.useState(!1),{seri:k}=n.useContext(le)||[],{user:w}=n.useContext(ce),[E,T]=n.useState(""),[h,u]=n.useState(!1),[y,F]=n.useState([]),g=de();n.useEffect(()=>{g(D(x))},[h]);const V=t=>{g(pe(t))},R=t=>{g(ue(t))},L=t=>{p(t),g(D(t))};E&&(a=a.data.filter(t=>t.isApproved==!1),E=="Select"&&a.data.map(t=>a==null?void 0:a.data.push(t)));const z=async()=>{(await ge(y)).data.success==!0?(u(!h),c.success("Delete products successfully")):c.error("Error deleting products")},Y=async()=>{(await ye(y)).data.success==!0?(u(!h),c.success("Approved Products Successfully")):c.error("Error deleting products")},B=async()=>{(await me(y)).data.success==!0?(u(!h),c.success("Edit Products Successfully")):c.error("Error deleting products")},_=async t=>{(await g(we(t))).payload.success?c.success("Delete product successfully"):c.error("Error deleting product")},G=t=>{T(t)},H={selectedRowKeys:y,onChange:t=>{F(t)}},K=async t=>{const s=await Ce(t);s.data.success==!0?(j(s.data.message),u(!h)):f("Lỗi rồi!")},Q=async t=>{const s=await be(t);s.data.success==!0?(j(s.data.message),u(!h)):f("Lỗi rồi!")},U=async()=>{const t=await je();t.data.suscess==!0?j(t.data.message):f(t.data.message)},$=()=>{S(!0)},q=()=>{S(!1)},W=async()=>{try{await fe(),j("Suscess")}catch{f("Error")}},X=[{title:"Name",dataIndex:"name",key:"name",width:120},{title:"Slug",dataIndex:"slug",key:"slug",width:200},{title:"Category",key:"category",dataIndex:"category",width:150},{title:"View",key:"view",dataIndex:"view",width:100},{title:"Seri",key:"seri",dataIndex:"seri",width:100},{title:"Copyright",key:"copyright",dataIndex:"copyright",width:100},{title:"Active",dataIndex:"isActive",key:"isActive",width:90},{title:"Trailer",dataIndex:"trailer",key:"trailer",width:100},{title:"Country",dataIndex:"country",key:"country",width:100},{title:"Year",dataIndex:"year",key:"year",width:100},{title:"Options",dataIndex:"options",key:"options",width:100},{title:"Sidebar",key:"sidebar",dataIndex:"sidebar",width:100},{title:"Action",key:"action",dataIndex:"action",width:140,fixed:"right",render:(t,s)=>{switch(w==null?void 0:w.role){case 0:return e.jsx(e.Fragment,{children:e.jsx(l,{to:"/",children:e.jsx(r,{type:"text",shape:"circle",children:e.jsx(v,{})})})});case 1:return e.jsxs(e.Fragment,{children:[e.jsx(l,{to:"/",children:e.jsx(r,{type:"text",shape:"circle",children:e.jsx(v,{})})}),e.jsx(l,{to:`/dashboard/product/edit/${s.key}`,children:e.jsx(r,{type:"text",danger:!0,shape:"circle",children:e.jsx(C,{})})})]});case 2:return e.jsxs(e.Fragment,{children:[(s==null?void 0:s.isApproved)==!0?e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"flex items-center mb-2",icon:e.jsx(re,{}),ghost:!0,type:"text",style:{color:"#000"},disabled:s.isApproved==!0,children:"Approved"}),e.jsx(r,{onClick:()=>Q(s.key),icon:e.jsx(ne,{}),className:"flex items-center w-full justify-center mb-2",danger:!0,children:"Approval"})]}):e.jsx(e.Fragment,{children:e.jsx(r,{onClick:()=>K(s.key),icon:e.jsx(ie,{}),className:"flex items-center w-full justify-center text-white bg-blue-500",children:"Approve"})}),e.jsxs("div",{className:"flex",children:[e.jsx(l,{to:"/d/"+s.slug,children:e.jsx(r,{type:"text",shape:"circle",children:e.jsx(v,{})})}),e.jsx(l,{to:`/dashboard/product/edit/${s.slug}`,children:e.jsx(r,{type:"text",danger:!0,shape:"circle",children:e.jsx(C,{})})}),e.jsx(m,{title:"Delete the product",onConfirm:()=>_(s.key),okText:"Yes",cancelText:"No",children:e.jsx(r,{type:"text",shape:"circle",className:"ml-2",children:e.jsx(P,{})})}),e.jsx(r,{type:"text",shape:"circle",className:"ml-2",children:e.jsx(oe,{type:"success"})})]})]})}}}],Z=(a==null?void 0:a.data)&&(a==null?void 0:a.data.map(t=>{var s;return{key:t._id,name:t.name,slug:t.slug,trailer:t.trailer?"true":"false",category:(s=t==null?void 0:t.category)==null?void 0:s.name,view:e.jsx(A,{color:"#2db7f5",children:t.view}),sidebar:k&&k.map((N,Me)=>N._id===t.typeId&&N.name),seri:t.seri,copyright:t.copyright,isActive:t.server2||t.dailyMotionServer?e.jsx(A,{color:"success",children:"Video active"}):e.jsx(A,{color:"error",children:"No video"}),options:t.category.lang,country:t.category.country?t.category.country:"null",year:t.category.year?t.category.year:"null",isApproved:t.isApproved,idCategory:t.category,option:[e.jsx(r,{children:"Add Option"})]}}));return e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"mb-2 bg-blue-500 text-white",onClick:$,children:"Open"}),e.jsx(ee,{title:"Làm gì thì làm đi :))",onClose:q,open:O,children:e.jsxs(xe,{gutter:[10,10],align:"middle",style:{marginBottom:"10px"},children:[e.jsx(o,{children:e.jsx(m,{title:"Delete The Movies",onConfirm:z,okText:"Yes",cancelText:"No",children:e.jsx(r,{icon:e.jsx(P,{}),className:"flex items-center bg-gradient-to-br from-pink-500 to-orange-400 text-white",children:"Delete Multiple Movies"})})}),e.jsx(m,{title:"Approved Multiple Movies",onConfirm:Y,okText:"Yes",cancelText:"No",children:e.jsx(r,{className:"flex items-center bg-amber-500 text-white",children:"Approved Multiple"})}),e.jsx(m,{title:"Edit Multiple Movies",onConfirm:B,okText:"Yes",cancelText:"No",children:e.jsx(r,{icon:e.jsx(C,{}),className:"flex items-center mx-2 bg-gradient-to-br from-purple-600 to-blue-500 text-white",children:"Edit Multiple"})}),e.jsx(o,{children:e.jsx(l,{to:"/dashboard/product/add",children:e.jsx(r,{icon:e.jsx(b,{}),className:"flex items-center text-white bg-blue-500",children:"Add Movie"})})}),e.jsx(o,{children:e.jsx(l,{icon:e.jsx(b,{}),to:"/dashboard/product/creacting",children:e.jsx(r,{className:"bg-green-400 ",children:"Add Multiple Movies"})})}),e.jsx(o,{children:e.jsx(l,{to:"/dashboard/product/add",children:e.jsx(r,{className:"bg-yellow-400",children:"Export PDF"})})}),e.jsx(o,{children:e.jsx(l,{to:"/dashboard/product/add",children:e.jsx(r,{className:"bg-purple-500",shape:"round",children:"Export Excel"})})}),e.jsx(o,{children:e.jsx(I,{placeholder:"Category",onChange:V,style:{width:300},options:i&&(i==null?void 0:i.data.map((t,s)=>({label:t.name,value:t._id})))})}),e.jsx(o,{children:e.jsx(I,{placeholder:"Approval",onChange:G,style:{width:300},options:[{value:!0,label:"Approve"},{value:!1,label:"Approved"}],children:void 0})}),e.jsx(o,{children:e.jsx("div",{className:"form-outline",children:e.jsx("input",{type:"search",placeholder:"search...",className:"form-control p-2 rounded bg-[#fff] shadow-sm",onChange:t=>R(t.target.value)})})}),e.jsx(o,{children:e.jsxs(r,{onClick:()=>U(),icon:e.jsx(b,{}),danger:!0,className:"flex items-center",children:[e.jsx(te,{}),"Clear Products Redis"]})}),e.jsx(o,{children:e.jsxs("button",{onClick:()=>W(),type:"button",className:"gap-2 flex items-center py-2.5 px-6 text-sm bg-indigo-50 text-indigo-500 rounded-lg cursor-pointer font-semibold text-center shadow-xs transition-all duration-500 hover:bg-indigo-100",children:[e.jsx(se,{}),"Generate Episode Movie"]})})]})}),e.jsx(ae,{spinning:d,delay:void 0,children:e.jsx(he,{rowSelection:H,expandable:{expandedRowRender:t=>e.jsx(e.Fragment,{children:t.option})},columns:X,dataSource:Z,scroll:{x:1500,y:1e3},pagination:{defaultPageSize:40,showSizeChanger:!0,pageSizeOptions:["40","80","120"],current:x,onChange:L,total:a==null?void 0:a.totalCount}})})]})}),Ee=()=>{const a=M(i=>i.product.value),d=M(i=>i.product.isLoading),x=n.useMemo(()=>a,[a]),p=n.useMemo(()=>d,[d]);return e.jsx(e.Fragment,{children:e.jsx(ve,{products:x,isLoading:p})})};export{Ee as default};
