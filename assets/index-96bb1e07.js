import{r as c,af as P,j as a,a_ as q,I as E,b0 as F,b1 as I,aX as p}from"./vendor-96c022cb.js";import{e as W,g as z,a4 as B,n as H,V as R,c as y,p as g,q as i,O as n,w as U,a5 as $,a6 as G,a7 as L,k as Q,l as X}from"./index-3c5ae90d.js";import{p as Y}from"./type-4046db87.js";import{M as J}from"./index-8998841f.js";import{M as K}from"./index-6fb789ff.js";const ne=()=>{const[j,u]=c.useState(!1),[m,b]=c.useState(1),v=()=>{u(!0)},f=()=>{u(!1)},S=()=>{u(!1)},h=W(),r=z(B),{seri:d,weeks:t}=c.useContext(H),{handleSubmit:k,control:l}=P(),[x,w]=c.useState();c.useEffect(()=>{h(R(m))},[m]);const C=d&&(d==null?void 0:d.map((e,s)=>({label:s+1+" - "+e.name,value:e._id,children:e.categorymain.map((o,O)=>({label:O+1+" - "+o.cates.name,value:o.cates._id}))}))),A=e=>{w(e)},M=async e=>{const s=new FormData;s.append("name",e.name),s.append("des",e.des),s.append("sumSeri",e.sumSeri),s.append("week",e.week),s.append("type",e.type),s.append("file",e.file),s.append("up",e.up),s.append("time",e.time),s.append("isActive",e.isActive),s.append("year",e.year),s.append("anotherName",e.anotherName),s.append("hour",e.hour),s.append("lang",e.lang),s.append("season",e.season),s.append("quality",e.quality),(await h(G(s))).payload.success==!0?p.success("Thành công"):p.error("Thất bại")},N=async e=>{(await h(L(e))).payload?p.success("Delete Success"):p.error("Delete Failure")},D=async e=>{(await Y(x,{categoryId:e})).data.success?Q("Add category success!"):X("Failure!")},T=e=>{b(e)},V=t&&(t==null?void 0:t.map((e,s)=>({label:e.name,value:e._id}))),_=r.data&&r.data.map((e,s)=>({key:e._id,stt:s+1,name:a.jsx(y,{to:"/q/"+e._id,children:e.name}),slug:e.slug,image:a.jsx(q,{width:150,height:200,style:{objectFit:"cover"},src:e.linkImg}),createAt:e.createdAt,duration:e.time,isActive:e.isActive==0?a.jsx(g,{color:"warning",children:"isPending"}):a.jsx(g,{color:"success",children:"Done"}),year:e.year,set:e.up,week:t&&t.map(o=>o._id==e.week&&o.name),action:a.jsxs("div",{className:"flex gap-1",children:[a.jsx(y,{to:`/dashboard/category/edit/${e.slug}`,children:a.jsx(i,{style:{background:"#1677ff"},type:"primary",children:"Edit"})}),a.jsx(i,{danger:!0,className:"ml-2",onClick:()=>N(e._id),children:"Delete"}),a.jsx(i,{className:"ml-2",onClick:()=>D(e._id),children:"Push"})]})}));return a.jsxs(E.Fragment,{children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx(i,{type:"primary",onClick:v,children:"New"}),a.jsx(F,{style:{width:"100%"},value:x,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:C,placeholder:"Please select",treeDefaultExpandAll:!0,onChange:A,className:"mb-2"})]}),a.jsx(I,{title:"Basic Modal",open:j,onOk:f,onCancel:S,children:a.jsxs("form",{onSubmit:k(M),children:[a.jsx(n,{name:"name",label:"Name",control:l,rules:void 0}),a.jsx(n,{name:"anotherName",label:"Another Name",control:l,rules:void 0}),a.jsx(n,{name:"des",label:"Description",control:l,rules:void 0}),a.jsx(n,{name:"sumSeri",label:"Sum seri",control:l,rules:void 0}),a.jsx(n,{name:"type",label:"Type",control:l,rules:void 0}),a.jsx(n,{name:"week",label:"Week",control:l,rules:void 0}),a.jsx(n,{name:"time",label:"Duration",control:l,rules:void 0}),a.jsx(n,{name:"isActive",label:"isActive",control:l,rules:void 0}),a.jsx(n,{name:"year",label:"Year",control:l,rules:void 0}),a.jsx(n,{name:"up",label:"Set",control:l,rules:void 0}),a.jsx(n,{name:"hour",label:"Hour",control:l,rules:void 0}),a.jsx(n,{name:"lang",label:"lang",control:l,rules:void 0}),a.jsx(n,{name:"season",label:"season",control:l,rules:void 0}),a.jsx(n,{name:"quality",label:"quality",control:l,rules:void 0}),a.jsx(J,{name:"week",label:"Theo tuần",control:l,placeholder:"Week",defaultValue:"Week",options:V}),a.jsx(K,{name:"file",label:"Upload",control:l}),a.jsx(i,{htmlType:"submit",className:"mt-2",children:"Create"})]})}),a.jsx(U,{columns:$,dataSource:_,scroll:{x:1e3,y:1e3},pagination:{defaultPageSize:24,showSizeChanger:!0,pageSizeOptions:["24","44","64"],current:m,onChange:T,total:r==null?void 0:r.totalCount}})]})};export{ne as default};
