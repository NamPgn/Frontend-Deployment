import{r as n,w as k,ae as V,j as e,aW as d}from"./vendor-07012f45.js";import{n as I,g as L,e as A,V as C,X as P,c as U,O as i,Y as E,Z as F,q as b,_ as N,$ as T,a0 as D,a1 as $}from"./index-b23bc153.js";import{M as h}from"./index-acc6e986.js";import{M as j}from"./index-16c8d55d.js";const O=()=>{var x;const{seri:t}=n.useContext(I),[f,c]=n.useState(!1),{data:u}=L(s=>s.category.category),{id:p}=k(),{handleSubmit:g,reset:v,control:l}=V(),m=A(),[r,S]=n.useState({});n.useEffect(()=>{(async()=>{const{payload:a}=await m(T(p));v(a),S(a)})()},[]),n.useEffect(()=>{m(C(0))},[]);const w=async s=>{var y;const a=new FormData;a.append("name",s.name),a.append("slug",s.slug),a.append("category",s.category),a.append("_id",p),a.append("seri",s.seri),a.append("LinkCopyright",s.LinkCopyright),a.append("copyright",s.copyright),a.append("trailer",s.trailer),a.append("image",s.image),a.append("typeId",s.typeId),a.append("categorymain",s.categorymain),a.append("dailyMotionServer",s.dailyMotionServer),a.append("link",s.link),a.append("imageLink",s.image),a.append("view",s.view);const o=await m(D(a));((y=o==null?void 0:o.meta)==null?void 0:y.requestStatus)=="fulfilled"&&d.success(`Edit ${s.name} Success`)},M=async s=>{try{const a=new FormData;a.append("fileupload",s.fileupload),await $(p,a)&&(d.success(`${s.name} Susscessfully Uploaded`),c(!0))}catch{d.success(`${s.name} Failer Uploaded`)}finally{c(!1)}};return e.jsxs("div",{children:[e.jsx(P,{level:4,children:e.jsx(U,{to:`/d/${r.slug}`,children:r.name+" tập "+r.seri})}),e.jsxs("form",{onSubmit:g(w),children:[e.jsx(i,{name:"name",label:"Product name",control:l,rules:void 0}),e.jsx(i,{name:"slug",label:"Slug",control:l,rules:void 0}),e.jsx(i,{name:"seri",label:"Seri",control:l,rules:void 0}),e.jsx(i,{name:"view",label:"View",control:l,rules:void 0}),e.jsx(i,{name:"LinkCopyright",label:"LinkCopyright",control:l,rules:void 0}),e.jsx(i,{name:"link",label:"Video Url",control:l,rules:void 0}),e.jsx(i,{name:"dailyMotionServer",label:"DailyMotionServer",control:l,rules:void 0}),e.jsx(i,{name:"server2",label:"Assb server",control:l,rules:void 0}),e.jsx(i,{name:"trailer",label:"Trailer Video",control:l,rules:void 0}),e.jsx("div",{style:{width:"150px",height:"200px"},children:e.jsx(E,{src:F(200,(x=r==null?void 0:r.category)==null?void 0:x.linkImg),className:"w-full h-full"})}),e.jsx("br",{}),e.jsx(j,{name:"image",label:"New Image Upload",control:l}),e.jsx(i,{name:"imageLink",label:"Image Link",control:l,rules:void 0}),e.jsx(h,{label:"Category",control:l,name:"category",defaultValue:"category",options:u&&u.map((s,a)=>({label:s.name,value:s._id}))}),e.jsx("br",{}),e.jsx(h,{name:"typeId",label:"Thể loại của phim lẻ",control:l,defaultValue:"Thể loại",options:t&&(t==null?void 0:t.map((s,a)=>({label:s.name,value:s._id})))}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(b,{htmlType:"submit",className:"btn btn-primary mt-2",children:"Submit"})]}),e.jsx(N,{textColor:"#000",orientation:"center",children:"Abyss Server"}),e.jsxs("form",{onSubmit:g(M),children:[e.jsx(j,{name:"fileupload",label:"New Video Upload",control:l}),e.jsx("div",{className:"mt-2",children:e.jsx(b,{loading:f,htmlType:"submit",className:"btn btn-primary",children:"Submit"})})]})]})};export{O as default};
