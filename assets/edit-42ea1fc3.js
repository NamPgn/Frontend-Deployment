import{r as o,w as M,ae as k,j as s,as as p}from"./vendor-172e24aa.js";import{A as V,u as I,a as L,W as A,Y as C,h as P,P as i,Z as U,_ as E,c as b,$ as F,a0 as T,a1 as _,a2 as D}from"./index-5163a13e.js";import{M as x}from"./index-38a9f25b.js";import{M as h}from"./index-cde83d89.js";const Q=()=>{var f;const{seri:t}=o.useContext(V),[w,u]=o.useState(!1),{data:m}=I(e=>e.category.category),{id:d}=M(),{handleSubmit:g,reset:j,control:l}=k(),c=L(),[n,N]=o.useState({});o.useEffect(()=>{(async()=>{const{payload:a}=await c(T(d));j(a),N(a)})()},[]),o.useEffect(()=>{c(A(0))},[]);const S=async e=>{var y;const a=new FormData;a.append("name",e.name),a.append("slug",e.slug),a.append("category",e.category._id),a.append("_id",e._id),a.append("seri",e.seri),a.append("LinkCopyright",e.LinkCopyright),a.append("copyright",e.copyright),a.append("trailer",e.trailer),a.append("image",e.image),a.append("typeId",e.typeId),a.append("categorymain",e.categorymain),a.append("dailyMotionServer",e.dailyMotionServer),a.append("link",e.link),a.append("imageLink",e.image),a.append("view",e.view),a.append("server2",e.server2);const r=await c(_(a));((y=r==null?void 0:r.meta)==null?void 0:y.requestStatus)=="fulfilled"&&p.success(`Edit ${e.name} Success`)},v=async e=>{try{const a=new FormData;a.append("fileupload",e.fileupload),await D(d,a)&&(p.success(`${e.name} Susscessfully Uploaded`),u(!0))}catch{p.success(`${e.name} Failer Uploaded`)}finally{u(!1)}};return s.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[s.jsx(C,{level:4,className:"mb-4 text-lg font-semibold",children:s.jsx(P,{to:`/d/${n==null?void 0:n.slug}`,className:"text-blue-500 hover:underline",children:(n==null?void 0:n.name)+" tập "+(n==null?void 0:n.seri)})}),s.jsxs("form",{onSubmit:g(S),className:"space-y-4",children:[s.jsx(i,{name:"name",label:"Product name",control:l,className:"w-full"}),s.jsx(i,{name:"slug",label:"Slug",control:l,className:"w-full"}),s.jsx(i,{name:"seri",label:"Seri",control:l,className:"w-full"}),s.jsx(i,{name:"view",label:"View",control:l,className:"w-full"}),s.jsx(i,{name:"LinkCopyright",label:"LinkCopyright",control:l,className:"w-full"}),s.jsx(i,{name:"link",label:"Video Url",control:l,className:"w-full"}),s.jsx(i,{name:"dailyMotionServer",label:"DailyMotionServer",control:l,className:"w-full"}),s.jsx(i,{name:"server2",label:"Assb server",control:l,className:"w-full"}),s.jsx(i,{name:"trailer",label:"Trailer Video",control:l,className:"w-full"}),s.jsx("div",{className:" w-36",children:s.jsx(U,{src:E(200,(f=n==null?void 0:n.category)==null?void 0:f.linkImg),className:"object-cover rounded-md shadow-sm"})}),s.jsx(h,{name:"image",label:"New Image Upload",control:l,className:"w-full mt-4"}),s.jsx(i,{name:"imageLink",label:"Image Link",control:l,className:"w-full"}),s.jsx(x,{label:"Category",control:l,name:"category",defaultValue:"category",options:m==null?void 0:m.map(e=>({label:e.name,value:e._id})),className:"w-full mt-4"}),s.jsx(x,{name:"typeId",label:"Thể loại của phim lẻ",control:l,defaultValue:"Thể loại",options:t==null?void 0:t.map(e=>({label:e.name,value:e._id})),className:"w-full mt-4"}),s.jsx(b,{htmlType:"submit",children:"Submit"})]}),s.jsx(F,{textColor:"#000",orientation:"center",className:"mt-8",children:"Abyss Server"}),s.jsxs("form",{onSubmit:g(v),className:"space-y-4 mt-4",children:[s.jsx(h,{name:"fileupload",label:"New Video Upload",control:l,className:"w-full"}),s.jsx(b,{loading:w,htmlType:"submit",children:"Submit"})]})]})};export{Q as default};
