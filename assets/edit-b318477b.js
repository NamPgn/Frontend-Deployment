import{r as o,w as V,af as I,j as e,aW as d}from"./vendor-5f4444f9.js";import{n as L,g as A,e as C,T as P,V as T,c as U,J as r,W as D,X as E,q as j,Y as F,Z as N,_,$}from"./index-610e44f6.js";import{M as h}from"./index-f664c937.js";import{M as v}from"./index-9f9e8a1d.js";const J=()=>{var x,b;const{seri:l}=o.useContext(L),[f,m]=o.useState(!1),{data:u}=A(s=>s.category.category),{id:p}=V(),{handleSubmit:y,reset:S,control:i}=I(),c=C(),[n,w]=o.useState({});o.useEffect(()=>{(async()=>{const{payload:a}=await c(N(p));S(a),w(a)})()},[]),o.useEffect(()=>{c(P(0))},[]);const M=async s=>{var g;const a=new FormData;a.append("name",s.name),a.append("options",s.options),a.append("category",s.category),a.append("_id",p),a.append("seri",s.seri),a.append("LinkCopyright",s.LinkCopyright),a.append("copyright",s.copyright),a.append("descriptions",s.descriptions),a.append("trailer",s.trailer),a.append("image",s.image),a.append("year",s.year),a.append("country",s.country),a.append("typeId",s.typeId),a.append("categorymain",s.categorymain),a.append("dailyMotionServer",s.dailyMotionServer),a.append("link",s.link),a.append("imageLink",s.image),a.append("view",s.view);const t=await c(_(a));((g=t==null?void 0:t.meta)==null?void 0:g.requestStatus)=="fulfilled"&&d.success(`Edit ${s.name} Success`)},k=async s=>{try{const a=new FormData;a.append("fileupload",s.fileupload),await $(p,a)&&(d.success(`${s.name} Susscessfully Uploaded`),m(!0))}catch{d.success(`${s.name} Failer Uploaded`)}finally{m(!1)}};return e.jsxs("div",{children:[e.jsx(T,{level:4,children:e.jsx(U,{to:`/d/${n._id}?c=${(x=n.category)==null?void 0:x._id}`,children:n.name+" tập "+n.seri})}),e.jsxs("form",{onSubmit:y(M),children:[e.jsx(r,{name:"name",label:"Product name",control:i,rules:void 0}),e.jsx(r,{name:"seri",label:"Seri",control:i,rules:void 0}),e.jsx(r,{name:"view",label:"View",control:i,rules:void 0}),e.jsx(r,{name:"descriptions",label:"Desciption",control:i,rules:void 0}),e.jsx(r,{name:"LinkCopyright",label:"LinkCopyright",control:i,rules:void 0}),e.jsx(r,{name:"link",label:"Video Url",control:i,rules:void 0}),e.jsx(r,{name:"dailyMotionServer",label:"DailyMotionServer",control:i,rules:void 0}),e.jsx(r,{name:"server2",label:"Assb server",control:i,rules:void 0}),e.jsx(r,{name:"trailer",label:"Trailer Video",control:i,rules:void 0}),e.jsx("div",{style:{width:"150px",height:"200px"},children:e.jsx(D,{src:E(200,(b=n==null?void 0:n.category)==null?void 0:b.linkImg),className:"w-full h-full"})}),e.jsx("br",{}),e.jsx(v,{name:"image",label:"New Image Upload",control:i}),e.jsx(r,{name:"year",label:"Year",control:i,rules:void 0}),e.jsx(r,{name:"country",label:"country",control:i,rules:void 0}),e.jsx(r,{name:"options",label:"Options",control:i,rules:void 0}),e.jsx(r,{name:"imageLink",label:"Image Link",control:i,rules:void 0}),e.jsx(h,{label:"Category",control:i,name:"category",defaultValue:"category",options:u&&u.map((s,a)=>({label:s.name,value:s._id}))}),e.jsx("br",{}),e.jsx(h,{name:"typeId",label:"Thể loại của phim lẻ",control:i,defaultValue:"Thể loại",options:l&&(l==null?void 0:l.map((s,a)=>({label:s.name,value:s._id})))}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(j,{htmlType:"submit",className:"btn btn-primary mt-2",children:"Submit"})]}),e.jsx(F,{textColor:"#000",orientation:"center",children:"Abyss Server"}),e.jsxs("form",{onSubmit:y(k),children:[e.jsx(v,{name:"fileupload",label:"New Video Upload",control:i}),e.jsx("div",{className:"mt-2",children:e.jsx(j,{loading:f,htmlType:"submit",className:"btn btn-primary",children:"Submit"})})]})]})};export{J as default};
