import{j as t,B as X,s as D,r as c,i as G,g as H,D as J,b as E,F as S,c as p,o as s,G as K,H as Q,I as Y,J as $,Q as k,K as q,O as R,E as U,l as A}from"./index.e09b1868.js";import{P as W}from"./index.6daff77d.js";import{E as Z}from"./EditOutlined.988224c1.js";const v=({defaultValue:a,placeholder:o,style:l,options:n,...h})=>t(X,{placeholder:o,defaultValue:a,style:l,options:n,allowClear:!0,...h}),g=D.div``,C=D.input``,ee=({product:a,length:o,isLoading:l})=>{const{category:n,seri:h}=c.exports.useContext(G),[b,w]=c.exports.useState(""),[y,_]=c.exports.useState(""),[r,u]=c.exports.useState([]),[x,N]=c.exports.useState(!1),[F,I]=c.exports.useState(!1),[f,M]=c.exports.useState(3),P=H();c.exports.useEffect(()=>{P(J(f)),document.title="Admin Page"},[F,f]);let i=a;b.length&&(i=a.filter(e=>e.name.toLowerCase().includes(b.toLowerCase()))),y&&(i=a.filter(e=>y==e.category),y=="Select"&&a.map(e=>i.push(e)));const L=e=>{r.includes(e)?u(r.filter(m=>m!==e)):u([...r,e])},O=()=>{N(!x),u(x?[]:a.map(e=>e._id))},j=async()=>{window.confirm(r)==!0&&(I(!0),k.success("X\xF3a t\u1EA5t c\u1EA3 th\xE0nh c\xF4ng"),await q(r))},z=async e=>{(await P(R(e))).payload.success?k.success("Delete product successfully"):k.error("Error deleting product")},T=e=>{console.log(e),U("Click on No")},B=e=>{_(e)},V=i?i.map((e,m)=>({key:e._id,all:t(g,{children:t(C,{className:"form-check-input",checked:r.includes(e._id),onChange:()=>L(e._id),type:"checkbox",id:"defaultCheck1"})}),name:e.name,trailer:e.trailer?"true":"false",category:n&&n.data.map(d=>{if(d._id===e.category)return d.name}),sidebar:h&&h.map((d,te)=>d._id===e.typeId&&d.name),Seri:e.seri,copyright:e.copyright,options:e.options,country:e.country?e.country:"null",year:e.year?e.year:"null",action:E(S,{children:[t(p,{to:`/dashboard/product/edit/${e._id}`,children:t(s,{danger:!0,shape:"circle",children:t(Z,{})})}),t(W,{title:"Delete the product",onConfirm:()=>z(e._id),onCancel:T,okText:"Yes",cancelText:"No",children:t(s,{shape:"circle",className:"ml-2",children:t(K,{})})})]})})):"";return E(S,{children:[t(C,{type:"checkbox",className:"mr-2",checked:x,name:"",onChange:()=>O()}),t(s,{onClick:()=>{j()},children:"X\xF3a"}),t(p,{to:"/dashboard/product/add",children:t(s,{style:{display:"inline-block",margin:"10px 10px",background:"#1677ff"},children:"Add Product"})}),t(p,{to:"/dashboard/product/creacting",children:t(s,{style:{display:"inline-block",margin:"10px 10px",background:"#28a745"},children:"Add Multiple"})}),t(p,{to:"/dashboard/product/add",children:t(s,{style:{display:"inline-block  ",margin:"10px 10px",background:"#eca52b"},children:"Export PDF"})}),t(p,{to:"/dashboard/product/add",children:t(s,{danger:!0,shape:"round",style:{display:"inline-block  ",margin:"10px 10px"},children:"Export Excel"})}),t(v,{placeholder:"Select",onChange:B,defaultValue:"Select",style:{width:300},options:n&&(n==null?void 0:n.data.map((e,m)=>({label:e.name,value:e._id}))),children:void 0}),t(g,{style:{display:"inline-block"},children:t(g,{className:"input-group ml-2",children:t(g,{className:"form-outline",children:t(C,{type:"search",id:"form1",placeholder:"search...",className:"form-control p-3 rounded",onChange:e=>{w(e.target.value)}})})})}),t(Q,{spinning:l,delay:void 0,children:t(Y,{columns:$,dataSource:V,scroll:{x:1500,y:1e3},pagination:{defaultPageSize:40,showSizeChanger:!0,pageSizeOptions:["40","80","120"],current:f,onChange:e=>{M(e)},total:o}})})]})},se=()=>{const{product:a,length:o}=A(n=>n.product.value),l=A(n=>n.product.isLoading);return t(S,{children:t(ee,{product:a,isLoading:l,length:o})})};export{se as default};
