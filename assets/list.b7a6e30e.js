import{j as t,y as V,s as A,r as c,i as X,g as G,z as H,b as P,F as C,c as d,l as s,D as Q,B as Y,C as $,G as q,Q as f,H as J,I as K,E as R,k as E}from"./index.10bebe39.js";import{P as U}from"./index.688a801d.js";import{E as W}from"./EditOutlined.cbd4d9da.js";const Z=({defaultValue:a,placeholder:o,style:l,options:n,...p})=>t(V,{placeholder:o,defaultValue:a,style:l,options:n,allowClear:!0,...p}),m=A.div``,k=A.input``,v=({product:a,length:o,isLoading:l})=>{const{category:n}=c.exports.useContext(X),[p,D]=c.exports.useState(""),[g,w]=c.exports.useState(""),[r,h]=c.exports.useState([]),[y,N]=c.exports.useState(!1),[_,F]=c.exports.useState(!1),[x,M]=c.exports.useState(3),S=G();c.exports.useEffect(()=>{S(H(x)),document.title="Admin Page"},[_,x]);let i=a;p.length&&(i=a.filter(e=>e.name.toLowerCase().includes(p.toLowerCase()))),g&&(i=a.filter(e=>g==e.category),g=="Select"&&a.map(e=>i.push(e)));const I=e=>{r.includes(e)?h(r.filter(u=>u!==e)):h([...r,e])},L=()=>{N(!y),h(y?[]:a.map(e=>e._id))},z=async()=>{window.confirm(r)==!0&&(F(!0),f.success("X\xF3a t\u1EA5t c\u1EA3 th\xE0nh c\xF4ng"),await J(r))},j=async e=>{(await S(K(e))).payload.success?f.success("Delete product successfully"):f.error("Error deleting product")},O=e=>{console.log(e),R("Click on No")},T=e=>{w(e)},B=i?i.map((e,u)=>({key:e._id,all:t(m,{children:t(k,{className:"form-check-input",checked:r.includes(e._id),onChange:()=>I(e._id),type:"checkbox",id:"defaultCheck1"})}),name:e.name,trailer:e.trailer?"true":"false",category:n&&n.data.map(b=>{if(b._id===e.category)return b.name}),Seri:e.seri,copyright:e.copyright,options:e.options,country:e.country?e.country:"null",year:e.year?e.year:"null",action:P(C,{children:[t(d,{to:`/dashboard/product/edit/${e._id}`,children:t(s,{danger:!0,shape:"circle",children:t(W,{})})}),t(U,{title:"Delete the product",onConfirm:()=>j(e._id),onCancel:O,okText:"Yes",cancelText:"No",children:t(s,{shape:"circle",className:"ml-2",children:t(Q,{})})})]})})):"";return P(C,{children:[t(k,{type:"checkbox",className:"mr-2",checked:y,name:"",onChange:()=>L()}),t(s,{onClick:()=>{z()},children:"X\xF3a"}),t(d,{to:"/dashboard/product/add",children:t(s,{style:{display:"inline-block",margin:"10px 10px",background:"#1677ff"},children:"Add Product"})}),t(d,{to:"/dashboard/product/creacting",children:t(s,{style:{display:"inline-block",margin:"10px 10px",background:"#28a745"},children:"Add Multiple"})}),t(d,{to:"/dashboard/product/add",children:t(s,{style:{display:"inline-block  ",margin:"10px 10px",background:"#eca52b"},children:"Export PDF"})}),t(d,{to:"/dashboard/product/add",children:t(s,{danger:!0,shape:"round",style:{display:"inline-block  ",margin:"10px 10px"},children:"Export Excel"})}),t(Z,{placeholder:"Select",onChange:T,defaultValue:"Select",style:{width:300},options:n&&(n==null?void 0:n.data.map((e,u)=>({label:e.name,value:e._id}))),children:void 0}),t(m,{style:{display:"inline-block"},children:t(m,{className:"input-group ml-2",children:t(m,{className:"form-outline",children:t(k,{type:"search",id:"form1",placeholder:"search...",className:"form-control p-3 rounded",onChange:e=>{D(e.target.value)}})})})}),t(Y,{spinning:l,delay:void 0,children:t($,{columns:q,dataSource:B,scroll:{x:1500,y:1e3},pagination:{defaultPageSize:40,showSizeChanger:!0,pageSizeOptions:["40","80","120"],current:x,onChange:e=>{M(e)},total:o}})})]})},ae=()=>{const{product:a,length:o}=E(n=>n.product.value),l=E(n=>n.product.isLoading);return t(C,{children:t(v,{product:a,isLoading:l,length:o})})};export{ae as default};
