import{j as t,q as T,s as I,r,h as O,f as X,t as q,b,F as S,c as o,k as i,T as B,Q as k,v as Q,w as V,i as Y}from"./index.8cf8b171.js";const $=({defaultValue:n,placeholder:d,style:a,options:s,...y})=>t(T,{placeholder:d,defaultValue:n,style:a,options:s,allowClear:!0,...y}),u=I.div``,f=I.input``,G=[{title:"Select",key:"all",dataIndex:"all",width:100,fixed:"left"},{title:"Name",dataIndex:"name",key:"name"},{title:"Category",key:"category",dataIndex:"category"},{title:"Seri",key:"Seri",dataIndex:"Seri",width:100},{title:"Copyright",key:"copyright",dataIndex:"copyright",width:100},{title:"Trailer",dataIndex:"trailer",key:"trailer",width:100},{title:"Year",dataIndex:"year",key:"year",width:100},{title:"Options",dataIndex:"options",key:"options"},{title:"Country",dataIndex:"country",key:"country",width:100},{title:"Action",key:"action",dataIndex:"action",width:180,fixed:"right"}],H=({product:n,length:d})=>{const{category:a}=r.exports.useContext(O),[s,y]=r.exports.useState(""),[x,A]=r.exports.useState(""),[c,p]=r.exports.useState([]),[g,P]=r.exports.useState(!1),[D,E]=r.exports.useState(!1),[m,_]=r.exports.useState(1),C=X();r.exports.useEffect(()=>{C(q(m)),document.title="Admin Page"},[D,m]);let l=n;s.length&&(l=n.filter(e=>e.name.toLowerCase().includes(s.toLowerCase()))),x&&(l=n.filter(e=>x==e.category),x=="Select"&&n.map(e=>l.push(e)));const F=e=>{c.includes(e)?p(c.filter(h=>h!==e)):p([...c,e])},N=()=>{P(!g),p(g?[]:n.map(e=>e._id))},M=async()=>{window.confirm(c)==!0&&(E(!0),k.success("X\xF3a t\u1EA5t c\u1EA3 th\xE0nh c\xF4ng"),await Q(c))},j=async e=>{(await C(V(e))).payload.success?k.success("Delete product successfully"):k.error("Error deleting product")},z=e=>{A(e)},L=l?l.map((e,h)=>({key:e._id,all:t(u,{children:t(f,{className:"form-check-input",checked:c.includes(e._id),onChange:()=>F(e._id),type:"checkbox",id:"defaultCheck1"})}),name:e.name,trailer:e.trailer?"true":"false",category:a&&a.data.map(w=>{if(w._id===e.category)return w.name}),Seri:e.seri,copyright:e.copyright,options:e.options,country:e.country?e.country:"null",year:e.year?e.year:"null",action:b(S,{children:[t(o,{to:`/admin/product/edit/${e._id}`,children:t(i,{danger:!0,children:"Edit"})}),t(i,{type:"primary",onClick:()=>j(e._id),children:"Delete"})]})})):"";return b(S,{children:[t(f,{type:"checkbox",className:"mr-2",checked:g,name:"",onChange:()=>N()}),t(i,{onClick:()=>{M()},children:"X\xF3a"}),t(o,{to:"/admin/product/add",children:t(i,{style:{display:"inline-block",margin:"10px 10px",background:"#1677ff"},children:"Add Product"})}),t(o,{to:"/admin/product/creacting",children:t(i,{style:{display:"inline-block",margin:"10px 10px",background:"#28a745"},children:"Add Multiple"})}),t(o,{to:"/admin/product/add",children:t(i,{style:{display:"inline-block  ",margin:"10px 10px",background:"#eca52b"},children:"Export PDF"})}),t(o,{to:"/admin/product/add",children:t(i,{danger:!0,shape:"round",style:{display:"inline-block  ",margin:"10px 10px"},children:"Export Excel"})}),t($,{placeholder:"Select",onChange:z,defaultValue:"Select",style:{width:300},options:a&&(a==null?void 0:a.data.map((e,h)=>({label:e.name,value:e._id}))),children:void 0}),t(u,{style:{display:"inline-block"},children:t(u,{className:"input-group ml-2",children:t(u,{className:"form-outline",children:t(f,{type:"search",id:"form1",placeholder:"search...",className:"form-control p-3 rounded",onChange:e=>{y(e.target.value)}})})})}),t(B,{columns:G,dataSource:L,scroll:{x:1500,y:1e3},pagination:{defaultPageSize:40,showSizeChanger:!0,pageSizeOptions:["40","80","120"],current:m,onChange:e=>{_(e)},total:d}})]})},K=()=>{const{product:n,length:d}=Y(a=>a.product.value);return t(S,{children:t(H,{product:n,length:d})})};export{K as default};
