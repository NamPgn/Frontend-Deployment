import{ac as k,ad as S,f as v,i as C,ae as E,r,h as I,af as b,j as a,I as T,b as c,c as w,B as l,ag as u,T as D,Q as d,ah as F,ai as _}from"./index.3ad9f315.js";import{u as j}from"./index.esm.b96d621e.js";const h=k(),$=async(n,i)=>await S.post(`/push/type/category/${n}/${h.user._id}`,i,{headers:{Authorization:`Bearer ${h.token}`}}),z=[{title:"Stt",dataIndex:"stt",key:"stt"},{title:"Name",dataIndex:"name",key:"name"},{title:"Image",dataIndex:"image",key:"Image"},{title:"CreateAt",dataIndex:"createAt",key:"createAt"},{title:"Action",dataIndex:"action",key:"action"}],P=()=>{const n=v(),i=C(E),{seri:o}=r.exports.useContext(I),[p,m]=r.exports.useState(null),{register:s,handleSubmit:y}=j(),g=e=>{const t=new FormData;t.append("name",e.name),t.append("des",e.des),t.append("sumSeri",e.sumSeri),t.append("week",e.week),t.append("type",e.type),t.append("file",e.file[0]),d.success("Th\xE0nh c\xF4ng"),n(F(t))},x=e=>{e?(d.success("Delete Success"),n(_(e))):d.error("Delete Fail")};r.exports.useEffect(()=>{n(b())},[]);const f=e=>{m(e)},N=async e=>{await $(p,{categoryId:e})},A=i.data?i.data.map((e,t)=>({key:e._id,stt:t+1,name:e.name,image:a(T,{width:150,height:200,style:{objectFit:"cover"},src:e.linkImg}),createAt:e.createdAt,action:c("div",{className:"flex gap-1",children:[a(w,{to:`/admin/category/edit/${e._id}`,children:a(l,{style:{background:"#1677ff"},type:"primary",children:"Edit"})}),a(l,{danger:!0,className:"text-light ml-2",onClick:()=>x(e._id),children:"Delete"}),a(l,{className:"text-light ml-2",onClick:()=>N(e._id),children:"Push"})]})})):"";return c("div",{children:[a("div",{className:"p-2",style:{display:"flex",gap:"0 10px",justifyContent:"center"},children:o?o.map((e,t)=>a("div",{children:e.path=="/"?"":a(u.Group,{value:p,children:a(u,{name:"aa",onChange:()=>f(e._id),children:e.name})})},t)):""}),c("div",{className:"flex gap-2",children:[a(D,{className:"w-9/12",columns:z,dataSource:A,pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","20","30"]}}),c("form",{className:"w-3/12",onSubmit:y(g),children:[a("div",{className:"text-black",children:"Th\xEAm"}),a("div",{className:"group",children:a("input",{placeholder:"T\xEAn danh m\u1EE5c",...s("name"),type:"text",className:"input2 "})}),a("div",{className:"group",children:a("input",{placeholder:"M\xF4 t\u1EA3",...s("des"),type:"text",className:"input2"})}),a("div",{className:"group",children:a("input",{placeholder:"T\u1ED5ng s\u1ED1 t\u1EADp",...s("sumSeri"),type:"text",className:"input2"})}),a("div",{className:"group",children:a("input",{placeholder:"Ki\u1EC3u",...s("type"),type:"text",className:"input2"})}),a("div",{className:"group",children:a("input",{placeholder:"Theo tu\u1EA7n",...s("week"),type:"text",className:"input2"})}),a("div",{className:"group",children:a("input",{type:"file",name:"file",...s("file"),className:"form-control"})}),a(l,{htmlType:"submit",children:"Add"})]})]})]})};export{P as default};
