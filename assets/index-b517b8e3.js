import{r as n,j as e,aS as se,a5 as ae,af as D,aT as C,aU as re,aV as ie,aW as ne,aX as oe,as as c,aY as ce,aZ as le,a_ as de,E as S,al as pe}from"./vendor-172e24aa.js";import{u as v,A as xe,M as he,a as ue,g as T,b as A,c as a,d as ge,e as r,f as g,h as o,i as ye,j as me,s as je,k as fe,l as we,m as be,n as Ce,o as y,p as m,q as Se,r as ve,t as Ae,v as Me}from"./index-ae266876.js";const V=n.memo(({defaultValue:i,placeholder:j,style:h,options:f,...x})=>e.jsx(se,{placeholder:j,defaultValue:i,style:h,options:f,allowClear:!0,...x})),Oe=n.memo(()=>{const i=v(t=>t.product.value),j=v(t=>t.product.isLoading),[h,f]=n.useState(1),x=v(t=>t.category.category),[F,w]=n.useState(!1),{seri:M}=n.useContext(xe)||[],{user:b}=n.useContext(he),[ke,R]=n.useState(""),[l,d]=n.useState(!1),[u,L]=n.useState([]),p=ue();n.useEffect(()=>{p(T(h))},[l]);const Y=t=>{p(me(t))},_=t=>{p(je(t))},z=t=>{f(t),p(T(t))},B=async()=>{(await fe(u)).data.success==!0?(d(!l),c.success("Delete products successfully")):c.error("Error deleting products")},q=async()=>{(await we(u)).data.success==!0?(d(!l),c.success("Approved Products Successfully")):c.error("Error deleting products")},G=async()=>{(await be(u)).data.success==!0?(d(!l),c.success("Edit Products Successfully")):c.error("Error deleting products")},K=async t=>{(await p(ve(t))).payload.success?c.success("Delete product successfully"):c.error("Error deleting product")},U=t=>{R(t)},$={selectedRowKeys:u,onChange:t=>{L(t)}},H=async t=>{const s=await Ae(t);s.data.success==!0?(y(s.data.message),d(!l)):m("Lỗi rồi!")},Q=async t=>{const s=await Me(t);s.data.success==!0?(y(s.data.message),d(!l)):m("Lỗi rồi!")},W=async()=>{const t=await Ce();t.data.suscess==!0?y(t.data.message):m(t.data.message)},X=()=>{w(!0)},Z=()=>{w(!1)},J=async()=>{(await p(Se())).meta.requestStatus=="fulfilled"?(d(!l),w(!1),y("Suscess")):m("Error")},ee=[{title:"Name",dataIndex:"name",key:"name",width:120},{title:"Slug",dataIndex:"slug",key:"slug",width:200},{title:"Category",key:"category",dataIndex:"category",width:150},{title:"View",key:"view",dataIndex:"view",width:100},{title:"Seri",key:"seri",dataIndex:"seri",width:100},{title:"Copyright",key:"copyright",dataIndex:"copyright",width:100},{title:"Active",dataIndex:"isActive",key:"isActive",width:90},{title:"Trailer",dataIndex:"trailer",key:"trailer",width:100},{title:"Country",dataIndex:"country",key:"country",width:100},{title:"Year",dataIndex:"year",key:"year",width:100},{title:"Options",dataIndex:"options",key:"options",width:100},{title:"Sidebar",key:"sidebar",dataIndex:"sidebar",width:100},{title:"Action",key:"action",dataIndex:"action",width:140,fixed:"right",render:(t,s)=>{switch(b==null?void 0:b.role){case 0:return e.jsx(e.Fragment,{children:e.jsx(o,{to:"/",children:e.jsx(a,{type:"text",shape:"circle",children:e.jsx(S,{})})})});case 1:return e.jsxs(e.Fragment,{children:[e.jsx(o,{to:"/",children:e.jsx(a,{type:"text",shape:"circle",children:e.jsx(S,{})})}),e.jsx(o,{to:`/dashboard/product/edit/${s.key}`,children:e.jsx(a,{type:"text",danger:!0,shape:"circle",children:e.jsx(C,{})})})]});case 2:return e.jsxs(e.Fragment,{children:[(s==null?void 0:s.isApproved)==!0?e.jsxs(e.Fragment,{children:[e.jsx(a,{className:"flex items-center mb-2",icon:e.jsx(ce,{}),ghost:!0,type:"text",style:{color:"#000"},disabled:s.isApproved==!0,children:"Approved"}),e.jsx(a,{onClick:()=>Q(s.key),icon:e.jsx(le,{}),className:"flex items-center w-full justify-center mb-2",danger:!0,children:"Approval"})]}):e.jsx(e.Fragment,{children:e.jsx(a,{onClick:()=>H(s.key),icon:e.jsx(de,{}),className:"flex items-center w-full justify-center text-white bg-blue-500",children:"Approve"})}),e.jsxs("div",{className:"flex",children:[e.jsx(o,{to:"/d/"+s.slug,children:e.jsx(a,{type:"text",shape:"circle",children:e.jsx(S,{})})}),e.jsx(o,{to:`/dashboard/product/edit/${s.slug}`,children:e.jsx(a,{type:"text",danger:!0,shape:"circle",children:e.jsx(C,{})})}),e.jsx(g,{title:"Delete the product",onConfirm:()=>K(s.key),okText:"Yes",cancelText:"No",children:e.jsx(a,{type:"text",shape:"circle",className:"ml-2",children:e.jsx(D,{})})}),e.jsx(a,{type:"text",shape:"circle",className:"ml-2",children:e.jsx(pe,{type:"success"})})]})]})}}}],te=(i==null?void 0:i.data)&&(i==null?void 0:i.data.map(t=>{var s,k,N,E,P,I;return{key:t._id,name:t.name,slug:t.slug,trailer:t.trailer?"true":"false",category:(s=t==null?void 0:t.category)==null?void 0:s.name,view:e.jsx(A,{color:"#2db7f5",children:t.view}),sidebar:M&&M.map((O,Ee)=>O._id===t.typeId&&O.name),seri:t.seri,copyright:t.copyright,isActive:t.server2||t.dailyMotionServer?e.jsx(A,{color:"success",children:"Video active"}):e.jsx(A,{color:"error",children:"No video"}),options:(k=t.category)==null?void 0:k.lang,country:(N=t.category)!=null&&N.country?(E=t.category)==null?void 0:E.country:"null",year:(P=t.category)!=null&&P.year?(I=t.category)==null?void 0:I.year:"null",isApproved:t.isApproved,idCategory:t.category,option:[e.jsx(a,{children:"Add Option"})]}}));return e.jsxs(e.Fragment,{children:[e.jsx(a,{className:"mb-2 bg-blue-500 text-white",onClick:X,children:"Open"}),e.jsx(ae,{title:"Làm gì thì làm đi :))",onClose:Z,open:F,children:e.jsxs(ge,{gutter:[10,2],align:"middle",style:{marginBottom:"10px"},className:"flex flex-wrap items-center space-y-4",children:[e.jsx(r,{children:e.jsx(g,{title:"Delete The Movies",onConfirm:B,okText:"Yes",cancelText:"No",children:e.jsx(a,{icon:e.jsx(D,{}),className:"flex items-center bg-gradient-to-br from-pink-500 to-orange-400 text-white",children:"Delete Multiple Movies"})})}),e.jsx(r,{children:e.jsx(g,{title:"Approved Multiple Movies",onConfirm:q,okText:"Yes",cancelText:"No",children:e.jsx(a,{className:"flex items-center bg-amber-500 text-white",children:"Approved Multiple"})})}),e.jsx(r,{children:e.jsx(g,{title:"Edit Multiple Movies",onConfirm:G,okText:"Yes",cancelText:"No",children:e.jsx(a,{icon:e.jsx(C,{}),className:"flex items-center bg-gradient-to-br from-purple-600 to-blue-500 text-white",children:"Edit Multiple"})})}),e.jsx(r,{children:e.jsx(o,{to:"/dashboard/product/add",children:e.jsx(a,{icon:e.jsx(re,{}),className:"flex items-center bg-blue-500 text-white",children:"Add Movie"})})}),e.jsx(r,{children:e.jsx(o,{to:"/dashboard/product/creacting",children:e.jsx(a,{className:"flex items-center bg-green-400 text-white",children:"Add Multiple Movies"})})}),e.jsx(r,{children:e.jsx(o,{to:"/dashboard/product/export-pdf",children:e.jsx(a,{className:"bg-yellow-400 text-white",children:"Export PDF"})})}),e.jsx(r,{children:e.jsx(o,{to:"/dashboard/product/export-excel",children:e.jsx(a,{className:"bg-purple-500 text-white",shape:"round",children:"Export Excel"})})}),e.jsx(r,{children:e.jsx(V,{placeholder:"Category",onChange:Y,style:{width:300},options:x==null?void 0:x.data.map(t=>({label:t.name,value:t._id}))})}),e.jsx(r,{children:e.jsx(V,{placeholder:"Approval",onChange:U,style:{width:300},options:[{value:!0,label:"Approve"},{value:!1,label:"Not Approved"}]})}),e.jsx(r,{children:e.jsx("div",{className:"form-outline",children:e.jsx("input",{type:"search",placeholder:"search...",className:"form-control p-2 rounded bg-white shadow-sm w-full",onChange:t=>_(t.target.value)})})}),e.jsx(r,{children:e.jsx(a,{onClick:W,icon:e.jsx(ie,{}),className:"flex items-center text-white bg-red-600",children:"Clear Products Redis"})}),e.jsx(r,{children:e.jsxs("button",{onClick:()=>J(),type:"button",className:"gap-2 flex items-center py-2.5 px-6 text-sm bg-indigo-50 text-indigo-500 rounded-lg cursor-pointer font-semibold text-center shadow-xs transition-all duration-500 hover:bg-indigo-100",children:[e.jsx(ne,{}),"Generate Episode Movie"]})})]})}),e.jsx(oe,{spinning:j,delay:void 0,children:e.jsx(ye,{rowSelection:$,expandable:{expandedRowRender:t=>e.jsx(e.Fragment,{children:t.option})},columns:ee,dataSource:te,scroll:{x:1500,y:1e3},pagination:{defaultPageSize:40,showSizeChanger:!0,pageSizeOptions:["40","80","120"],current:h,onChange:z,total:i==null?void 0:i.totalCount}})})]})});export{Oe as default};
